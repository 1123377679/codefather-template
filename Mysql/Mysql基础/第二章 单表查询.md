# DQL

DQL英文全称是Data Query Language(数据查询语言)，数据查询语言，用来查询数据库中表的记录。

```
SELECT
	字段列表
FROM
	表名列表
WHERE
	条件列表
GROUP BY
	分组字段列表
HAVING
	分组后条件列表
ORDER BY
	排序字段列表
LIMIT
	分页参数
```

基本查询

条件查询(WHERE)

聚合函数(count,max,min,avg,min)

分组查询(GROUP BY HAVING)

排序查询(ORDER BY)

分页查询(LIMIT)

## DQL-基本查询

1.查询多个字段

```
SELECT 字段1，字段2，字段 3，... FROM 表名;
```

```
SELECT * FROM 表名;
```

2.设置别名

```
SELECT 字段1 [AS  别名1]，字段2[AS 别名2]... FROM 表名;
```

3.去除重复记录

```
SELECT DISTINCT 字段列表 FROM 表名;
```

>案例:
>
>1.查询指定字段empUsername,sex,age
>
>2.查询所有字段																							
>
>3.查询员工的别名(不要重复)
>
>4.查询员工的入职日期，起别名

## DQL-条件查询(WHERE)

1.语法 

```
SELECT 字段列表 FROM 表名 WHERE 条件列表;
```

2.条件 

| 比较运算符    | 功能                                  |
| ------------- | ------------------------------------- |
| >             | 大于                                  |
| >=            | 大于等于                              |
| <             | 小于                                  |
| <=            | 小于等于                              |
| =             | 等于                                  |
| <>或者!=      | 不等于                                |
| BETWEEN...AND | 在某个范围之内(含最小、最大值)        |
| IN(...)       | 在in之后的列表中的值，多选一          |
| LIKE占位符    | 模糊匹配(_匹配单个字符,%匹配任意字符) |
| IS NULL       | 是NULL                                |

| 逻辑运算符 | 功能                       |
| ---------- | -------------------------- |
| AND或者&&  | 并且(多个条件同时成立)     |
| OR或者\|\| | 或者(多个条件任意一个成立) |
| NOT或者!   | 非，不是                   |

>案例:
>
>查询年龄等于18的员工
>
>查询年龄在18-45岁之间的员工
>
>查询年龄小于25且性别为女
>
>查询年龄18或者20的员工
>
>查询姓名为两个字的员工信息
>
>查询身份证号最后一位是X的员工信息

## DQL-聚合函数(count,max,min,avg,sum)

1.介绍

​	将一列数据作为一个整体，进行纵向计算（作用于某一列）

2.常见聚合函数

| 函数  | 功能     |
| ----- | -------- |
| count | 统计数量 |
| max   | 最大值   |
| min   | 最小值   |
| avg   | 平均值   |
| sum   | 求和     |

3.语法

```
SELECT 聚合函数(字段列表) FROM 表名;
```

>案例:
>
>统计该企业员工数量
>
>统计该企业的平均年龄
>
>统计该企业的员工的最大年龄
>
>统计员工的年龄之和

注意:null值是不参加所有聚合函数运算

## DQL-分组查询(GROUP BY HAVING)

1.语法

```sql
SELECT 字段列表 FROM 表名 [WHERE 条件] GROUP BY 分组字段名[HAVING 分组后过滤条件];
```

2.where与having区别
执行时机不同：where:是分组之前进行过滤，不满足where条件，不参与分组；而having是分组之后对结果进行过滤。
判断条件不同：where不能对聚合函数进行判断，而having可以。 

>案例:
>
>根据性别分组，统计男性员工和女性员工的数量
>
>根据性别分组，统计男性员工和女性员工的平均年龄
>
>查询年龄小于45的员工，并根据工作地址分组，获取员工数量大于等于3的工作地址

注意：
1.执行顺序：where>聚合函数>having。
2.分组之后，查询的字段一般为聚合函数和分组字段，查询其他字段无任何意义

## DQL-排序查询(ORDER BY)

1.语法

```sql
SELECT 字段列表 FROM 表名 ORDER BY 字段1 排序方式1，字段2 排序方式2;
```

2.排序方式

- ASC:升序(默认值)

- DESC:降序

注意：如果是多字段排序，当第一个字段相同时，才会根据第二个字段进行排序

--排序查询案例

- -- 1.根据年龄对公司的员工进行排序
- -- 2.根据入职时间，对员工进行排序
- -- 3.根据年龄对公司的员工进行排序，年龄相同，再对入职时间进行降序排序
- 4.云课查询部分国家的官方语言并排序
- 5.云课查询每个系平均工资的降序排序



## DQL-分页查询(LIMIT)

1.语法

```
SELECT 字段列表 FROM 表名 LIMIT 起始索引，查询记录数;
```

注意：

1.起始索引从0开始，起始索引=（查询页码-1）*每页显示记录数。

2.分页查询是数据库的方言，不同的数据库有不同的实现，MySQL中是LIMIT。

3.如果查询的是第一页数据，起始索引可以省略，直接简写为limit 10。

-- 分页查询案例

- - 1.查询第一页员工，每页展示10条数据
- - 2.查询第二页员工，每页可以展示10条语句

课后练习：按照需求完成如下DQL语句的编写

- -1.查询年龄20，21，22，23的员工信息
- -2.查询性别为男，并且年龄在20-40岁(含)以内的姓名为三个字的员工
- -3.统计员工表中，年龄小于60岁的，男性员工和女性员工的人数
- -4.查询所有年龄小于等于35岁员工的姓名和年龄，并对查询结果按年龄升序排序，如果年龄相同按入职时间降序排序
- -5.查询性别为男，且年龄在20-40岁(含)以内的前5个员工，对查询的结果按年龄升序排序，年龄相同按入职时间升序排序

## DQL-执行顺序 

![image-20230127152837425](https://gitee.com/try-to-be-better/cloud-images/raw/master/img/image-20230127152837425.png)

# DCL

## DCL-介绍

DCL英文全称Data Control Language(数据控制语言)，用来管理数据库用户、控制数据库的访问权限。

## DCL-管理用户

![image-20230127153445291](https://gitee.com/try-to-be-better/cloud-images/raw/master/img/image-20230127153445291.png)

## DCL-权限控制

![image-20230127155221492](https://gitee.com/try-to-be-better/cloud-images/raw/master/img/image-20230127155221492.png)