(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{327:function(t,s,e){"use strict";e.r(s);var a=e(4),n=Object(a.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"filter"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#filter"}},[t._v("#")]),t._v(" Filter")]),t._v(" "),s("p",[t._v("概念：Filter表示过滤器，是JavaWeb三大组件(Servlet、.Filter、Listener)之一。")]),t._v(" "),s("p",[t._v("过滤器可以把对资源的请求"),s("strong",[t._v("拦截")]),t._v("下来，从而实现一些特殊的功能。")]),t._v(" "),s("p",[t._v("过滤器一般完成一些"),s("strong",[t._v("通用")]),t._v("的操作，比如：权限控制、统一编码处理、敏感字符处理等等…")]),t._v(" "),s("p",[t._v("例如某些网站未登录不能查看评论，不能将商品加入购物车，得把你拦下来，先让你登录，也就是在访问前，先经过Filter。")]),t._v(" "),s("p",[t._v("下面来具体说说，拦截器拦截到后可以做什么功能呢？")]),t._v(" "),s("p",[t._v("过滤器一般完成一些通用的操作。比如每个资源都要写一些代码完成某个功能，我们总不能在每个资源中写这样的代码吧，而此时我们可以将这些代码写在过滤器中，因为请求每一个资源都要经过过滤器。")]),t._v(" "),s("p",[t._v("我们之前做的品牌数据管理的案例中就已经做了登陆的功能，但这个登录功能其实是如同虚设的，我们可以直接访问登录后的页面，所以本文的目标就是完善登录功能，不登录就无法查看数据。")]),t._v(" "),s("h1",{attrs:{id:"filter快速入门"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#filter快速入门"}},[t._v("#")]),t._v(" Filter快速入门")]),t._v(" "),s("p",[t._v("1.定义类，实现Filter接口，并重写其所有方法")]),t._v(" "),s("p",[s("img",{staticClass:"lazy",attrs:{alt:"image-20231120214743667","data-src":"https://gitee.com/try-to-be-better/cloud-images/raw/master/img/202311202148947.png",loading:"lazy"}})]),t._v(" "),s("p",[t._v("2.配置Filter拦截资源的路径：在类上定义@WebFilter注解")]),t._v(" "),s("p",[s("img",{staticClass:"lazy",attrs:{alt:"image-20231120214755632","data-src":"https://gitee.com/try-to-be-better/cloud-images/raw/master/img/202311202147186.png",loading:"lazy"}})]),t._v(" "),s("p",[t._v("3.在doFilter方法中输出一句话，并放行")]),t._v(" "),s("p",[s("img",{staticClass:"lazy",attrs:{alt:"image-20231120214807823","data-src":"https://gitee.com/try-to-be-better/cloud-images/raw/master/img/202311202148720.png",loading:"lazy"}})]),t._v(" "),s("p",[t._v("只有被放行了才能被访问")]),t._v(" "),s("h1",{attrs:{id:"filter执行流程"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#filter执行流程"}},[t._v("#")]),t._v(" Filter执行流程")]),t._v(" "),s("p",[s("img",{staticClass:"lazy",attrs:{alt:"img","data-src":"https://gitee.com/try-to-be-better/cloud-images/raw/master/img/202311202150366.png",loading:"lazy"}})]),t._v(" "),s("p",[t._v("如上图是使用过滤器的流程，我们通过以下问题来研究过滤器的执行流程：")]),t._v(" "),s("ul",[s("li",[t._v("放行后访问对应资源，资源访问完成后，还会回到Filter中吗？\n"),s("ul",[s("li",[t._v("从上图就可以看出肯定会回到Filter中")])])]),t._v(" "),s("li",[t._v("如果回到Filter中，是重头执行还是执行放行后的逻辑呢？\n"),s("ul",[s("li",[t._v("如果是重头执行的话，就意味着 "),s("code",[t._v("放行前逻辑")]),t._v(" 会被执行两次，肯定不会这样设计了；所以访问完资源后，会回到 "),s("code",[t._v("放行后逻辑")]),t._v("，执行该部分代码。")])])])]),t._v(" "),s("p",[t._v("通过上述的说明，我们可以总结一下Filter的执行流程")]),t._v(" "),s("p",[s("img",{staticClass:"lazy",attrs:{alt:"image-20230220231223748","data-src":"E:%5Cmd%E5%9B%BE%E7%89%87%5Cimage-20230220231223748.png",loading:"lazy"}})]),t._v(" "),s("h1",{attrs:{id:"filter使用细节"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#filter使用细节"}},[t._v("#")]),t._v(" Filter使用细节")]),t._v(" "),s("h2",{attrs:{id:"filter拦截路径配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#filter拦截路径配置"}},[t._v("#")]),t._v(" Filter拦截路径配置")]),t._v(" "),s("p",[t._v("拦截路径表示 Filter 会对请求的哪些资源进行拦截，使用 "),s("code",[t._v("@WebFilter")]),t._v(" 注解进行配置。如："),s("code",[t._v('@WebFilter("拦截路径")')])]),t._v(" "),s("p",[t._v("拦截路径有如下四种配置方式：")]),t._v(" "),s("ul",[s("li",[t._v("拦截具体的资源：/index.jsp：只有访问index.jsp时才会被拦截")]),t._v(" "),s("li",[t._v("目录拦截：/user/*：访问/user下的所有资源，都会被拦截")]),t._v(" "),s("li",[t._v("后缀名拦截：*.jsp：访问后缀名为jsp的资源，都会被拦截")]),t._v(" "),s("li",[t._v("拦截所有：/*：访问所有资源，都会被拦截")])]),t._v(" "),s("h1",{attrs:{id:"过滤器链"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#过滤器链"}},[t._v("#")]),t._v(" 过滤器链")]),t._v(" "),s("p",[t._v("一个Web应用，可以配置多个过滤器，这多个过滤器称为过滤器链")]),t._v(" "),s("p",[t._v("如下图就是一个过滤器链，我们学习过滤器链主要是学习过滤器链执行的流程")]),t._v(" "),s("p",[s("img",{staticClass:"lazy",attrs:{alt:"image-20230220231900136","data-src":"https://gitee.com/try-to-be-better/cloud-images/raw/master/img/202311202230171.png",loading:"lazy"}})]),t._v(" "),s("p",[t._v("上图中的过滤器链执行是按照以下流程执行：")]),t._v(" "),s("ol",[s("li",[t._v("执行 "),s("code",[t._v("Filter1")]),t._v(" 的放行前逻辑代码")]),t._v(" "),s("li",[t._v("执行 "),s("code",[t._v("Filter1")]),t._v(" 的放行代码")]),t._v(" "),s("li",[t._v("执行 "),s("code",[t._v("Filter2")]),t._v(" 的放行前逻辑代码")]),t._v(" "),s("li",[t._v("执行 "),s("code",[t._v("Filter2")]),t._v(" 的放行代码")]),t._v(" "),s("li",[t._v("访问到资源")]),t._v(" "),s("li",[t._v("执行 "),s("code",[t._v("Filter2")]),t._v(" 的放行后逻辑代码")]),t._v(" "),s("li",[t._v("执行 "),s("code",[t._v("Filter1")]),t._v(" 的放行后逻辑代码")])]),t._v(" "),s("p",[t._v("以上流程串起来就像一条链子，故称之为过滤器链。")]),t._v(" "),s("h1",{attrs:{id:"案例-登录验证"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#案例-登录验证"}},[t._v("#")]),t._v(" 案例：登录验证")]),t._v(" "),s("p",[t._v("需求：访问服务器资源时，需要先进行登录验证，如果没有登录，则自动跳转到登录页面")]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("doFilter")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ServletRequest")]),t._v(" request"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ServletResponse")]),t._v(" response"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("FilterChain")]),t._v(" chain"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IOException")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ServletException")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n         "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HttpServletRequest")]),t._v(" httpRequest "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HttpServletRequest")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" request"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" urls "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/login.jsp"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/register.jsp"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/checkCodeServlet"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/UserServlet"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" url "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" httpRequest"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getRequestURL")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("toString")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" u "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" urls"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("url"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("contains")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("u"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                chain"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("doFilter")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("request"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("response"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HttpSession")]),t._v(" session "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" httpRequest"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getSession")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),t._v(" user "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" session"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getAttribute")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"user"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("user "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            chain"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("doFilter")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("request"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" response"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            httpRequest"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setAttribute")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"error"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"您尚未登录"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            httpRequest"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getRequestDispatcher")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/login.jsp"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("forward")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("request"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" response"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br")])]),s("h1",{attrs:{id:"监听器listener"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#监听器listener"}},[t._v("#")]),t._v(" 监听器Listener")]),t._v(" "),s("h2",{attrs:{id:"概述"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#概述"}},[t._v("#")]),t._v(" 概述")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("Listener 表示监听器，是 JavaWeb 三大组件(Servlet、Filter、Listener)之一。")])]),t._v(" "),s("li",[s("p",[t._v("监听器可以监听就是在 "),s("code",[t._v("application")]),t._v("，"),s("code",[t._v("session")]),t._v("，"),s("code",[t._v("request")]),t._v(" 三个对象创建、销毁或者往其中添加修改删除属性时自动执行代码的功能组件。")]),t._v(" "),s("p",[t._v("request 和 session 我们学习过。而 "),s("code",[t._v("application")]),t._v(" 是 "),s("code",[t._v("ServletContext")]),t._v(" 类型的对象。")]),t._v(" "),s("p",[s("code",[t._v("ServletContext")]),t._v(" 代表整个web应用，在服务器启动的时候，tomcat会自动创建该对象。在服务器关闭时会自动销毁该对象。")])])]),t._v(" "),s("p",[t._v("JavaWeb 提供了8个监听器：")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",{staticStyle:{"text-align":"center"}},[t._v("监听器分类")]),t._v(" "),s("th",{staticStyle:{"text-align":"center"}},[t._v("监听器名称")]),t._v(" "),s("th",{staticStyle:{"text-align":"center"}},[t._v("作用")])])]),t._v(" "),s("tbody",[s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("servletContext监听")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("servletContextListener")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("用于对ServletContext对象进行监听(创建、销毁)")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}}),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("ServletContextAttributeListener")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("对ServletContext对象中属性的监听（增删改属性）")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("session监听")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("HttpSessionListener")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("对Session对象的整体状态的监听（创建、销毁)")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}}),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("HttpSessionAttributeListener")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("对Session对象中的属性监听(增删改属性)")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}}),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("HttpSessionBindingListener")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("监听对象于Session的绑定和解除")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}}),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("HttpsessionActivationListener")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("对Session数据的钝化和活化的监听")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("Request监听")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("servletRequestListener")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("对Request对象进行监听(创建、销毁)")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}}),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("servletRequestAttributeListener")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("对Request对象中属性的监听(增删改属性)")])])])]),t._v(" "),s("p",[t._v("这里面只有 "),s("code",[t._v("ServletContextListener")]),t._v(" 这个监听器后期我们会接触到，"),s("code",[t._v("ServletContextListener")]),t._v(" 是用来监听 "),s("code",[t._v("ServletContext")]),t._v(" 对象的创建和销毁。")]),t._v(" "),s("p",[s("code",[t._v("ServletContextListener")]),t._v(" 接口中有以下两个方法")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("void contextInitialized(ServletContextEvent sce)")]),t._v("："),s("code",[t._v("ServletContext")]),t._v(" 对象被创建了会自动执行的方法")]),t._v(" "),s("li",[s("code",[t._v("void contextDestroyed(ServletContextEvent sce)")]),t._v("："),s("code",[t._v("ServletContext")]),t._v(" 对象被销毁时会自动执行的方法")])]),t._v(" "),s("h2",{attrs:{id:"代码演示"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#代码演示"}},[t._v("#")]),t._v(" 代码演示")]),t._v(" "),s("p",[t._v("我们只演示一下 "),s("code",[t._v("ServletContextListener")]),t._v(" 监听器")]),t._v(" "),s("ul",[s("li",[t._v("定义一个类，实现"),s("code",[t._v("ServletContextListener")]),t._v(" 接口")]),t._v(" "),s("li",[t._v("重写所有的抽象方法")]),t._v(" "),s("li",[t._v("使用 "),s("code",[t._v("@WebListener")]),t._v(" 进行配置")])]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@WebListener")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ContextLoaderListener")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("implements")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ServletContextListener")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("contextInitialized")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ServletContextEvent")]),t._v(" sce"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//加载资源")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ContextLoaderListener..."')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("contextDestroyed")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ServletContextEvent")]),t._v(" sce"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//释放资源")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br")])]),s("p",[t._v("启动服务器，就可以在控制台输出了 "),s("code",[t._v("ContextLoaderListener...")]),t._v("，同时也说明了 "),s("code",[t._v("ServletContext")]),t._v(" 对象在服务器启动的时候被创建了。")])])}),[],!1,null,null,null);s.default=n.exports}}]);