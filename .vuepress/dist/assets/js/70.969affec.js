(window.webpackJsonp=window.webpackJsonp||[]).push([[70],{367:function(t,e,a){"use strict";a.r(e);var s=a(4),l=Object(s.a)({},(function(){var t=this,e=t._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"函数"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#函数"}},[t._v("#")]),t._v(" 函数")]),t._v(" "),e("h2",{attrs:{id:"什么是函数"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#什么是函数"}},[t._v("#")]),t._v(" 什么是函数")]),t._v(" "),e("p",[t._v("函数是指一段可以直接被另一段程序调用的程序或代码")]),t._v(" "),e("p",[t._v("比如说：举个例子")]),t._v(" "),e("p",[t._v("数据库表中，存储的是入职日期，如2000-1-12，如何快速计算入职天数?")]),t._v(" "),e("p",[t._v("数据库表中，存储的是学生的分数值，如98、75，如何快速判定分数的等级呢?")]),t._v(" "),e("h2",{attrs:{id:"字符串函数"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#字符串函数"}},[t._v("#")]),t._v(" 字符串函数")]),t._v(" "),e("p",[t._v("Mysql中内置了很多字符串函数，常用的几个如下:")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"left"}},[t._v("函数")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("功能")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("CONCAT(s1, s2, …, sn)")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("字符串拼接，将s1, s2, …, sn拼接成一个字符串")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("LOWER(str)")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("将字符串全部转为小写")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("UPPER(str)")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("将字符串全部转为大写")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("LPAD(str, n, pad)")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("左填充，用字符串pad对str的左边进行填充，达到n个字符串长度")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("RPAD(str, n, pad)")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("右填充，用字符串pad对str的右边进行填充，达到n个字符串长度")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("TRIM(str)")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("去掉字符串头部和尾部的空格")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("SUBSTRING(str, start, len)")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("返回从字符串str从start位置起的len个长度的字符串")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("REPLACE(column, source, replace)")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("替换字符串")])])])]),t._v(" "),e("p",[t._v("使用示例:")]),t._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("-- 拼接\nSELECT CONCAT('Hello', 'World');\n-- 小写\nSELECT LOWER('Hello');\n-- 大写\nSELECT UPPER('Hello');\n-- 左填充\nSELECT LPAD('01', 5, '-');\n-- 右填充\nSELECT RPAD('01', 5, '-');\n-- 去除空格\nSELECT TRIM(' Hello World ');\n-- 切片（起始索引为1）\nSELECT SUBSTRING('Hello World', 1, 5);\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br"),e("span",{staticClass:"line-number"},[t._v("8")]),e("br"),e("span",{staticClass:"line-number"},[t._v("9")]),e("br"),e("span",{staticClass:"line-number"},[t._v("10")]),e("br"),e("span",{staticClass:"line-number"},[t._v("11")]),e("br"),e("span",{staticClass:"line-number"},[t._v("12")]),e("br"),e("span",{staticClass:"line-number"},[t._v("13")]),e("br"),e("span",{staticClass:"line-number"},[t._v("14")]),e("br")])]),e("p",[t._v("案例：")]),t._v(" "),e("p",[t._v("根据需求完成以下SQL的编写")]),t._v(" "),e("p",[t._v("由于业务需求变更，企业员工的工号，统一为5位数，目前不足5位数的全部在前面补0，比如：1号员工的工号应该是00001")]),t._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("UPDATE emp SET empId = LPAD(empId,5,'0');\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br")])]),e("h2",{attrs:{id:"数值函数"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#数值函数"}},[t._v("#")]),t._v(" 数值函数")]),t._v(" "),e("p",[t._v("常见数值函数如下：")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"left"}},[t._v("函数")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("功能")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("CEIL(x)")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("向上取整")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("FLOOR(x)")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("向下取整")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("MOD(x, y)")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("返回x/y的模")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("RAND()")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("返回0~1内的随机数")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("ROUND(x, y)")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("求参数x的四舍五入值，保留y位小数")])])])]),t._v(" "),e("p",[t._v("练习：通过数据库的函数，生成一个六位数的随机验证码")]),t._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("SELECT LPAD(ROUND(RAND()*1000000,0),6,'0') ;\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br")])]),e("h2",{attrs:{id:"日期函数"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#日期函数"}},[t._v("#")]),t._v(" 日期函数")]),t._v(" "),e("p",[t._v("常见的日期函数如下：")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"left"}},[t._v("函数")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("功能")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("CURDATE()")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("返回当前日期")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("CURTIME()")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("返回当前时间")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("NOW()")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("返回当前日期和时间")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("YEAR(date)")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("获取指定date的年份")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("MONTH(date)")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("获取指定date的月份")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("DAY(date)")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("获取指定date的日期")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("DATE_ADD(date, INTERVAL expr type)")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("返回一个日期/时间值加上一个时间间隔expr后的时间值")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("DATEDIFF(date1, date2)")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("返回起始时间date1和结束时间date2之间的天数")])])])]),t._v(" "),e("p",[t._v("使用示例:")]),t._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("-- 返回当前日期\nselect CURDATE();\n\n-- 获取指定date的年份\nselect YEAR(NOW());\n\n-- 返回一个日期/时间值加上一个时间间隔expr后的时间值\nselect DATE_ADD(now(),70,DAY);\n\n-- 返回起始时间date1和结束时间date2之间的天数\nselect DATEDIFF('2022-3-10', '2022-1-10');\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br"),e("span",{staticClass:"line-number"},[t._v("8")]),e("br"),e("span",{staticClass:"line-number"},[t._v("9")]),e("br"),e("span",{staticClass:"line-number"},[t._v("10")]),e("br"),e("span",{staticClass:"line-number"},[t._v("11")]),e("br")])]),e("p",[t._v("案例:")]),t._v(" "),e("p",[t._v("查询所有员工的入职天数，并根据入职天数倒序排序")]),t._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("-- 查询所有员工的入职天数，并根据入职天数倒序排序\nSELECT empUsername,DATEDIFF(CURDATE(),jointime)AS 'jointime' FROM emp ORDER BY jointime DESC;\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br")])]),e("h2",{attrs:{id:"流程控制函数"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#流程控制函数"}},[t._v("#")]),t._v(" 流程控制函数")]),t._v(" "),e("p",[t._v("流程函数也是很常用的一类函数，可以在SQL语句中实现条件筛选，从而提高语句的效率")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"left"}},[t._v("函数")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("功能")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("IF(value, t, f)")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("如果value为true，则返回t，否则返回f")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("IFNULL(value1, value2)")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("如果value1不为空，返回value1，否则返回value2")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("CASE WHEN [ val1 ] THEN [ res1 ] … ELSE [ default ] END")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("如果val1为true，返回res1，… 否则返回default默认值")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("CASE [ expr ] WHEN [ val1 ] THEN [ res1 ] … ELSE [ default ] END")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("如果expr的值等于val1，返回res1，… 否则返回default默认值")])])])]),t._v(" "),e("p",[t._v("使用示例:")]),t._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("-- if\nselect if(false,'Ok','Error');\n\n-- ifnull\nselect ifnull('ok','Default');\n\n--case when then else end\n--需求:查询emp表中的员工姓名和工作地址(重庆和成都 ---\x3e一线城市，其他---\x3e二线城市)\nselect name,(workaddress when '重庆' then '一线城市' when '成都' then '一线城市' else '二线城市' end) as '工作地址' from emp;\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br"),e("span",{staticClass:"line-number"},[t._v("8")]),e("br"),e("span",{staticClass:"line-number"},[t._v("9")]),e("br")])]),e("p",[t._v("案例:")]),t._v(" "),e("p",[t._v("统计班级各个学生的成绩，展示的规则如下:")]),t._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v(">=85分 展示优秀\n>=60分 展示及格\n否则，展示不及格\nselect id,name,\n (case when math>=85 then '优秀' when math>=60 then '及格' else '不及格' end) '数学',\n (case when english>=85 then '优秀' when english>=60 then '及格' else '不及格' end) '英语',\n (case when chinese>=85 then '优秀' when chinese>=60 then '及格' else '不及格' end) '语文' from score;\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br")])])])}),[],!1,null,null,null);e.default=l.exports}}]);