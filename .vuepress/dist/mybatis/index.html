<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Mybatis简介 | 李某人的编程宝库</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="/favicon.ico">
    <script>
        var _hmt = _hmt || [];
        (function() {
          var hm = document.createElement("script");
          hm.src = "https://hm.baidu.com/hm.js?2675818a983a3131404cee835018f016";
          var s = document.getElementsByTagName("script")[0]; 
          s.parentNode.insertBefore(hm, s);
        })();
      </script>
    <meta name="description" content="前后端课程资料">
    <meta property="og:site_name" content="李某人的编程宝库">
    <meta property="og:title" content="Mybatis简介">
    <meta property="og:type" content="article">
    <meta property="og:url" content="https://codefather.cn/mybatis/">
    <meta name="twitter:title" content="Mybatis简介">
    <meta name="twitter:url" content="https://codefather.cn/mybatis/">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:label1" content="Written by">
    <meta name="twitter:label2" content="Filed under">
    <meta name="twitter:data2" content="程序员, 编程, 计算机">
    <meta property="article:tag" content="程序员">
    <meta name="keywords" content="李某人, 编程学习路线, 编程知识百科, Java, 编程导航, 前端, 开发, 编程分享, 项目, IT, 求职, 面经">
    <meta name="referrer" content="no-referrer">
    
    <link rel="preload" href="/assets/css/0.styles.40c15e22.css" as="style"><link rel="preload" href="/assets/js/app.bfb9a41f.js" as="script"><link rel="preload" href="/assets/js/2.11372cd1.js" as="script"><link rel="preload" href="/assets/js/63.d1b52891.js" as="script"><link rel="prefetch" href="/assets/js/1.772e8449.js"><link rel="prefetch" href="/assets/js/10.fc348f1d.js"><link rel="prefetch" href="/assets/js/11.5cb15a10.js"><link rel="prefetch" href="/assets/js/12.0b172212.js"><link rel="prefetch" href="/assets/js/13.db362dd7.js"><link rel="prefetch" href="/assets/js/14.91cf31cd.js"><link rel="prefetch" href="/assets/js/15.97ca09d4.js"><link rel="prefetch" href="/assets/js/16.0a8709a6.js"><link rel="prefetch" href="/assets/js/17.e4c6b844.js"><link rel="prefetch" href="/assets/js/18.d0f0bd51.js"><link rel="prefetch" href="/assets/js/19.5740e4d6.js"><link rel="prefetch" href="/assets/js/20.8885a4fa.js"><link rel="prefetch" href="/assets/js/21.468bfc8f.js"><link rel="prefetch" href="/assets/js/22.3e8347a6.js"><link rel="prefetch" href="/assets/js/23.ceb5a5ff.js"><link rel="prefetch" href="/assets/js/24.a121e824.js"><link rel="prefetch" href="/assets/js/25.15e1f641.js"><link rel="prefetch" href="/assets/js/26.35b2bbdc.js"><link rel="prefetch" href="/assets/js/27.abf3307e.js"><link rel="prefetch" href="/assets/js/28.7e4f3680.js"><link rel="prefetch" href="/assets/js/29.859b5924.js"><link rel="prefetch" href="/assets/js/3.4dc033c7.js"><link rel="prefetch" href="/assets/js/30.a8b8c321.js"><link rel="prefetch" href="/assets/js/31.34407a93.js"><link rel="prefetch" href="/assets/js/32.7b9696aa.js"><link rel="prefetch" href="/assets/js/33.86c359c6.js"><link rel="prefetch" href="/assets/js/34.71e963ef.js"><link rel="prefetch" href="/assets/js/35.99422ea8.js"><link rel="prefetch" href="/assets/js/36.b36ad629.js"><link rel="prefetch" href="/assets/js/37.8088ca20.js"><link rel="prefetch" href="/assets/js/38.ee59d0ef.js"><link rel="prefetch" href="/assets/js/39.e9e0818c.js"><link rel="prefetch" href="/assets/js/4.2f502b73.js"><link rel="prefetch" href="/assets/js/40.2d874ace.js"><link rel="prefetch" href="/assets/js/41.ff2b4925.js"><link rel="prefetch" href="/assets/js/42.56ac03bc.js"><link rel="prefetch" href="/assets/js/43.79ce3f44.js"><link rel="prefetch" href="/assets/js/44.63d3f43f.js"><link rel="prefetch" href="/assets/js/45.82b20480.js"><link rel="prefetch" href="/assets/js/46.3268de07.js"><link rel="prefetch" href="/assets/js/47.3ea663b6.js"><link rel="prefetch" href="/assets/js/48.237aef1d.js"><link rel="prefetch" href="/assets/js/49.359d7204.js"><link rel="prefetch" href="/assets/js/5.7b1f056c.js"><link rel="prefetch" href="/assets/js/50.32c15e42.js"><link rel="prefetch" href="/assets/js/51.514c9ee7.js"><link rel="prefetch" href="/assets/js/52.cdb02c77.js"><link rel="prefetch" href="/assets/js/53.ac097e8b.js"><link rel="prefetch" href="/assets/js/54.ecb4cc22.js"><link rel="prefetch" href="/assets/js/55.2a2a0fa9.js"><link rel="prefetch" href="/assets/js/56.5d97bdac.js"><link rel="prefetch" href="/assets/js/57.460ec670.js"><link rel="prefetch" href="/assets/js/58.4d0ec45b.js"><link rel="prefetch" href="/assets/js/59.f5d05d7b.js"><link rel="prefetch" href="/assets/js/6.056886f1.js"><link rel="prefetch" href="/assets/js/60.7f54cef1.js"><link rel="prefetch" href="/assets/js/61.359b4ac9.js"><link rel="prefetch" href="/assets/js/62.f833bb22.js"><link rel="prefetch" href="/assets/js/64.d78eda32.js"><link rel="prefetch" href="/assets/js/65.fb383e1b.js"><link rel="prefetch" href="/assets/js/66.69754198.js"><link rel="prefetch" href="/assets/js/67.94dfad4b.js"><link rel="prefetch" href="/assets/js/68.22f255bb.js"><link rel="prefetch" href="/assets/js/69.cbdf2af2.js"><link rel="prefetch" href="/assets/js/7.a96cecf9.js"><link rel="prefetch" href="/assets/js/70.969affec.js"><link rel="prefetch" href="/assets/js/71.267dafdb.js"><link rel="prefetch" href="/assets/js/72.e9e91f67.js"><link rel="prefetch" href="/assets/js/73.2828bcaf.js"><link rel="prefetch" href="/assets/js/74.aebb67cf.js"><link rel="prefetch" href="/assets/js/75.14f12fdb.js"><link rel="prefetch" href="/assets/js/76.9983b53a.js"><link rel="prefetch" href="/assets/js/77.7504b553.js"><link rel="prefetch" href="/assets/js/78.90a66e5e.js"><link rel="prefetch" href="/assets/js/79.17426337.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.9f962556.js">
    <link rel="stylesheet" href="/assets/css/0.styles.40c15e22.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/logo.png" alt="李某人的编程宝库" class="logo"> <span class="site-name can-hide">李某人的编程宝库</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/Java基础/" class="nav-link">
  Java基础
</a></div><div class="nav-item"><a href="/Linux/" class="nav-link">
  Linux
</a></div><div class="nav-item"><a href="/Mysql/Mysql基础/" class="nav-link">
  Mysql基础
</a></div><div class="nav-item"><a href="/Mysql/Mysql进阶/" class="nav-link">
  Mysql进阶
</a></div><div class="nav-item"><a href="/MyBatis/" class="nav-link">
  MyBatis
</a></div> <a href="https://github.com/liyupi/codefather" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/Java基础/" class="nav-link">
  Java基础
</a></div><div class="nav-item"><a href="/Linux/" class="nav-link">
  Linux
</a></div><div class="nav-item"><a href="/Mysql/Mysql基础/" class="nav-link">
  Mysql基础
</a></div><div class="nav-item"><a href="/Mysql/Mysql进阶/" class="nav-link">
  Mysql进阶
</a></div><div class="nav-item"><a href="/MyBatis/" class="nav-link">
  MyBatis
</a></div> <a href="https://github.com/liyupi/codefather" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Mybatis简介</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/mybatis/#mybatis历史" class="sidebar-link">Mybatis历史</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/mybatis/#mybatis的特性" class="sidebar-link">Mybatis的特性</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/mybatis/#mybatis的下载" class="sidebar-link">Mybatis的下载</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/mybatis/#和其它持久化层技术对比" class="sidebar-link">和其它持久化层技术对比</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/mybatis/#搭建mybatis" class="sidebar-link">搭建Mybatis</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/mybatis/#创建mybatis的核心配置文件" class="sidebar-link">创建MyBatis的核心配置文件</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/mybatis/#创建mapper接口" class="sidebar-link">创建Mapper接口</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/mybatis/#创建mybatis的映射文件" class="sidebar-link">创建Mybatis的映射文件</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/mybatis/#通过junit测试功能" class="sidebar-link">通过junit测试功能</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/mybatis/#加入log4j日志功能" class="sidebar-link">加入log4j日志功能</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/mybatis/#日志级别" class="sidebar-link">日志级别:</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/mybatis/#user" class="sidebar-link">User</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/mybatis/#usermapper" class="sidebar-link">UserMapper</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/mybatis/#mybatis-config-xml配置文件" class="sidebar-link">mybatis-config.xml配置文件</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/mybatis/#测试类" class="sidebar-link">测试类</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/mybatis/#jdbc-properties" class="sidebar-link">jdbc.properties</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/mybatis/#mybatis-config-xml" class="sidebar-link">Mybatis-config.xml</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/mybatis/#mapper接口方法的参数为单个的字面量类型" class="sidebar-link">Mapper接口方法的参数为单个的字面量类型</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/mybatis/#用户名查询信息" class="sidebar-link">用户名查询信息</a></li></ul></li><li><a href="/mybatis/#mapper接口方法的参数为多个时" class="sidebar-link">mapper接口方法的参数为多个时</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/mybatis/#登录功能" class="sidebar-link">登录功能</a></li></ul></li><li><a href="/mybatis/#mapper接口方法的参数有多个时-可以手动将这些参数放在一个map中存储" class="sidebar-link">mapper接口方法的参数有多个时，可以手动将这些参数放在一个map中存储</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/mybatis/#验证登录" class="sidebar-link">验证登录</a></li></ul></li><li><a href="/mybatis/#_4-mapper接口方法的参数是实体类类型的参数" class="sidebar-link">4.mapper接口方法的参数是实体类类型的参数</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/mybatis/#_5-使用-param注解命名参数" class="sidebar-link">5.使用@Param注解命名参数</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/mybatis/#验证登录-使用-param" class="sidebar-link">验证登录(使用@Param)</a></li></ul></li><li><a href="/mybatis/#查询一个实体类对象" class="sidebar-link">查询一个实体类对象</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/mybatis/#查询用户的总记录数-单行单列" class="sidebar-link">查询用户的总记录数(单行单列)</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/mybatis/#默认的类型别名" class="sidebar-link">默认的类型别名</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/mybatis/#查询map集合" class="sidebar-link">查询Map集合</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/mybatis/#查询所有用户信息为map集合" class="sidebar-link">查询所有用户信息为Map集合</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/mybatis/#mybatis处理模糊查询" class="sidebar-link">Mybatis处理模糊查询</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/mybatis/#mybatis批量删除" class="sidebar-link">Mybatis批量删除</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/mybatis/#mybatis动态设置表名" class="sidebar-link">Mybatis动态设置表名</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/mybatis/#添加功能获取自增的主键" class="sidebar-link">添加功能获取自增的主键</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/mybatis/#resultmap处理字段和属性的映射关系" class="sidebar-link">resultMap处理字段和属性的映射关系</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/mybatis/#第一种-处理多对一的映射关系" class="sidebar-link">第一种:处理多对一的映射关系</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/mybatis/#通过级联属性赋值解决多对一的映射关系" class="sidebar-link">通过级联属性赋值解决多对一的映射关系</a></li></ul></li><li><a href="/mybatis/#第二种-处理多对一的映射关系" class="sidebar-link">第二种:处理多对一的映射关系</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/mybatis/#通过association解决多对一的映射关系-常用" class="sidebar-link">通过association解决多对一的映射关系(常用)</a></li></ul></li><li><a href="/mybatis/#第三种-处理多对一的映射关系" class="sidebar-link">第三种:处理多对一的映射关系</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/mybatis/#分步查询" class="sidebar-link">分步查询</a></li></ul></li><li><a href="/mybatis/#延迟加载" class="sidebar-link">延迟加载</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/mybatis/#开启延迟加载" class="sidebar-link">开启延迟加载</a></li></ul></li><li><a href="/mybatis/#通过collection解决一对多的映射关系" class="sidebar-link">通过collection解决一对多的映射关系</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/mybatis/#获取部门以及部门中所有的员工信息" class="sidebar-link">获取部门以及部门中所有的员工信息</a></li></ul></li><li><a href="/mybatis/#通过分步查询解决一对多的映射关系" class="sidebar-link">通过分步查询解决一对多的映射关系</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/mybatis/#通过分步查询查询部门以及部门中所有的员工信息" class="sidebar-link">通过分步查询查询部门以及部门中所有的员工信息</a></li></ul></li><li><a href="/mybatis/#回顾" class="sidebar-link">回顾</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/mybatis/#初始动态sql" class="sidebar-link">初始动态SQL</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/mybatis/#if标签-常用" class="sidebar-link">if标签(常用)</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/mybatis/#where标签-常用" class="sidebar-link">where标签(常用)</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/mybatis/#choose、when、otherwise" class="sidebar-link">choose、when、otherwise</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/mybatis/#foreach-常用" class="sidebar-link">foreach(常用)</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/mybatis/#批量删除" class="sidebar-link">批量删除</a></li><li class="sidebar-sub-header"><a href="/mybatis/#批量添加" class="sidebar-link">批量添加</a></li></ul></li><li><a href="/mybatis/#sql标签-sql片段" class="sidebar-link">SQL标签(SQL片段)</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/mybatis/#mybtais一级缓存" class="sidebar-link">Mybtais一级缓存</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/mybatis/#不同的sqlsession对应不同的一级缓存" class="sidebar-link">不同的SqlSession对应不同的一级缓存</a></li><li class="sidebar-sub-header"><a href="/mybatis/#同一个sqlsession但是查询条件不同" class="sidebar-link">同一个SqlSession但是查询条件不同</a></li><li class="sidebar-sub-header"><a href="/mybatis/#同一个sqlsession两次查询期间执行了任何一次增删改操作" class="sidebar-link">同一个SqlSession两次查询期间执行了任何一次增删改操作</a></li><li class="sidebar-sub-header"><a href="/mybatis/#同一个sqlsession两次查询期间手动清空了-一级-缓存" class="sidebar-link">同一个SqlSession两次查询期间手动清空了（一级）缓存</a></li></ul></li><li><a href="/mybatis/#mybatis二级缓存" class="sidebar-link">Mybatis二级缓存</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/mybatis/#二级缓存的开启条件" class="sidebar-link">二级缓存的开启条件</a></li><li class="sidebar-sub-header"><a href="/mybatis/#在映射文件中设置标签-cache" class="sidebar-link">在映射文件中设置标签&lt;cache /&gt;</a></li><li class="sidebar-sub-header"><a href="/mybatis/#测试" class="sidebar-link">测试</a></li></ul></li><li><a href="/mybatis/#mybatis缓存查询的顺序" class="sidebar-link">Mybatis缓存查询的顺序</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/mybatis/#mybatis整合第三方缓存ehchahe" class="sidebar-link">Mybatis整合第三方缓存EHChahe</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/mybatis/#创建逆向工程的步骤" class="sidebar-link">创建逆向工程的步骤</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/mybatis/#添加依赖和插件" class="sidebar-link">添加依赖和插件</a></li><li class="sidebar-sub-header"><a href="/mybatis/#创建mybatis的核心配置文件-2" class="sidebar-link">创建MyBatis的核心配置文件</a></li><li class="sidebar-sub-header"><a href="/mybatis/#创建逆向工程的配置文件" class="sidebar-link">创建逆向工程的配置文件</a></li></ul></li><li><a href="/mybatis/#qbc" class="sidebar-link">QBC</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/mybatis/#查询" class="sidebar-link">查询</a></li><li class="sidebar-sub-header"><a href="/mybatis/#增改" class="sidebar-link">增改</a></li></ul></li><li><a href="/mybatis/#分页插件使用步骤" class="sidebar-link">分页插件使用步骤</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/mybatis/#添加依赖" class="sidebar-link">添加依赖</a></li><li class="sidebar-sub-header"><a href="/mybatis/#配置分页插件" class="sidebar-link">配置分页插件</a></li></ul></li><li><a href="/mybatis/#分页插件的使用" class="sidebar-link">分页插件的使用</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/mybatis/#开启分页功能" class="sidebar-link">开启分页功能</a></li><li class="sidebar-sub-header"><a href="/mybatis/#分页相关数据" class="sidebar-link">分页相关数据</a></li><li class="sidebar-sub-header"><a href="/mybatis/#方法一-直接输出" class="sidebar-link" style="padding-left:3rem;">方法一：直接输出</a></li><li class="sidebar-sub-header"><a href="/mybatis/#方法二使用pageinfo" class="sidebar-link" style="padding-left:3rem;">方法二使用PageInfo</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="content"><div style="width:100%"><div class="theme-default-content custom-content content__default"><h1 id="mybatis简介"><a href="#mybatis简介" class="header-anchor">#</a> Mybatis简介</h1> <h2 id="mybatis历史"><a href="#mybatis历史" class="header-anchor">#</a> Mybatis历史</h2> <ul><li><p>MyBatis最初是Apache的一个开源项目iBatis, 2010年6月这个项目由Apache Software Foundation迁移到了Google Code。随着开发团队转投Google Code旗下，MyBatis.x正式更名为MyBatis。代码于2013年11月迁移到Github</p></li> <li><p>MyBatis一词来源于“internet”和“abatis”的组合，是一个基于Java的持久层框架。MyBatis提供的持久层框架包括SQL Maps和Data Access Objects（DAO）</p></li></ul> <h2 id="mybatis的特性"><a href="#mybatis的特性" class="header-anchor">#</a> Mybatis的特性</h2> <p>MyBatis 是支持定制化 SQL、存储过程以及高级映射的优秀的持久层框架</p> <p>MyBatis 避免了几乎所有的 JDBC 代码和手动设置参数以及获取结果集</p> <p>MyBatis可以使用简单的XML或注解用于配置和原始映射，将接口和Java的POJO（Plain Old Java Objects，普通的Java对象）映射成数据库中的记录</p> <p>MyBatis 是一个 半自动的ORM（Object Relation Mapping）框架</p> <h2 id="mybatis的下载"><a href="#mybatis的下载" class="header-anchor">#</a> Mybatis的下载</h2> <p>https://gitcode.net/mirrors/mybatis/mybatis-3?utm_source=csdn_github_accelerator</p> <p><img alt="在这里插入图片描述" data-src="https://img-blog.csdnimg.cn/2cee4ebdf2af47ff9c033ab329ed48b1.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA6IuN6IyX,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center" loading="lazy" class="lazy"></p> <h2 id="和其它持久化层技术对比"><a href="#和其它持久化层技术对比" class="header-anchor">#</a> 和其它持久化层技术对比</h2> <p><code>JDBC</code>
SQL 夹杂在Java代码中耦合度高，导致硬编码内伤</p> <p>​	维护不易且实际开发需求中 SQL 有变化，频繁修改的情况多见</p> <p>​	代码冗长，开发效率低</p> <p><code>Hibernate 和 JPA</code>
操作简便，开发效率高</p> <p>​	程序中的长难复杂 SQL 需要绕过框架</p> <p>​	内部自动生产的 SQL，不容易做特殊优化</p> <p>​	基于全映射的全自动框架，大量字段的 POJO 进行部分映射时比较困难。</p> <p>​	反射操作太多，导致数据库性能下降</p> <p><code>MyBatis</code></p> <p>​	轻量级，性能出色</p> <p>​	SQL 和 Java 编码分开，功能边界清晰。Java代码专注业务、SQL语句专注数据</p> <p>​	开发效率稍逊于HIbernate，但是完全能够接受</p> <h2 id="搭建mybatis"><a href="#搭建mybatis" class="header-anchor">#</a> 搭建Mybatis</h2> <p>创建Maven工程</p> <ul><li><p>打包方式:jar</p></li> <li><p>引入依赖</p></li> <li><div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
	<span class="token comment">&lt;!-- Mybatis核心 --&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.mybatis<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mybatis<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>3.5.7<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
	<span class="token comment">&lt;!-- junit测试 --&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>junit<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>junit<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>4.12<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
	<span class="token comment">&lt;!-- MySQL驱动 --&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>mysql<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mysql-connector-java<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>8.0.26<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h2 id="创建mybatis的核心配置文件"><a href="#创建mybatis的核心配置文件" class="header-anchor">#</a> 创建MyBatis的核心配置文件</h2> <blockquote><p>习惯上命名为mybatis-config.xml，这个文件名仅仅只是建议，并非强制要求。将来整合Spring之后，这个配置文件可以省略，所以大家操作时可以直接复制、粘贴。</p> <p>核心配置文件主要用于配置连接数据库的环境以及MyBatis的全局配置信息</p> <p>核心配置文件存放的位置是src/main/resources目录下</p></blockquote></li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token operator">&lt;</span><span class="token operator">?</span>xml version<span class="token operator">=</span><span class="token string">&quot;1.0&quot;</span> encoding<span class="token operator">=</span><span class="token string">&quot;UTF-8&quot;</span> <span class="token operator">?</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token constant">DOCTYPE</span> configuration
        <span class="token constant">PUBLIC</span> <span class="token string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span>
        <span class="token string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span><span class="token operator">&gt;</span>
<span class="token generics"><span class="token punctuation">&lt;</span>configuration<span class="token punctuation">&gt;</span></span>
    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>设置连接数据库的环境<span class="token operator">--</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>environments <span class="token keyword">default</span><span class="token operator">=</span><span class="token string">&quot;development&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>environment id<span class="token operator">=</span><span class="token string">&quot;development&quot;</span><span class="token operator">&gt;</span>
     		<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>底层是<span class="token constant">JDBC</span><span class="token operator">--</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>transactionManager type<span class="token operator">=</span><span class="token string">&quot;JDBC&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>配置数据库的连接信息<span class="token operator">--</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>dataSource type<span class="token operator">=</span><span class="token string">&quot;POOLED&quot;</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>property name<span class="token operator">=</span><span class="token string">&quot;driver&quot;</span> value<span class="token operator">=</span><span class="token string">&quot;com.mysql.cj.jdbc.Driver&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>property name<span class="token operator">=</span><span class="token string">&quot;url&quot;</span> value<span class="token operator">=</span><span class="token string">&quot;jdbc:mysql://localhost:3306/lanqiao?serverTimezone=GMT&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>property name<span class="token operator">=</span><span class="token string">&quot;username&quot;</span> value<span class="token operator">=</span><span class="token string">&quot;root&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>property name<span class="token operator">=</span><span class="token string">&quot;password&quot;</span> value<span class="token operator">=</span><span class="token string">&quot;123456&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>dataSource<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>environment<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>environments<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>引入映射文件<span class="token operator">--</span><span class="token operator">&gt;</span>
    <span class="token generics"><span class="token punctuation">&lt;</span>mappers<span class="token punctuation">&gt;</span></span>
        <span class="token operator">&lt;</span>mapper resource<span class="token operator">=</span><span class="token string">&quot;cn/lanqiao/mapper/UserMapper.xml&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>mappers<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>configuration<span class="token operator">&gt;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><h2 id="创建mapper接口"><a href="#创建mapper接口" class="header-anchor">#</a> 创建Mapper接口</h2> <blockquote><p>MyBatis中的mapper接口相当于以前的dao。但是区别在于，mapper仅仅是接口，我们不需要提供实现类</p></blockquote> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>mybatis<span class="token punctuation">.</span>mapper</span><span class="token punctuation">;</span>  
  
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">UserMapper</span> <span class="token punctuation">{</span>  
	<span class="token comment">/**  
	* 添加用户信息  
	*/</span>  
	<span class="token keyword">int</span> <span class="token function">insertUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h2 id="创建mybatis的映射文件"><a href="#创建mybatis的映射文件" class="header-anchor">#</a> 创建Mybatis的映射文件</h2> <ul><li>相关概念：ORM（Object Relationship Mapping）对象关系映射。
<ul><li>对象：Java的实体类对象</li> <li>关系：关系型数据库</li> <li>映射：二者之间的对应关系</li></ul></li></ul> <table><thead><tr><th>Java概念</th> <th>数据库概念</th></tr></thead> <tbody><tr><td>类</td> <td>表</td></tr> <tr><td>属性</td> <td>字段/列</td></tr> <tr><td>对象</td> <td>记录/行</td></tr></tbody></table> <ul><li><p>映射文件的命名规则</p> <ul><li>表所对应的实体类的类名+Mapper.xml</li> <li>例如：表t_user，映射的实体类为User，所对应的映射文件为UserMapper.xml</li> <li>因此一个映射文件对应一个实体类，对应一张表的操作</li> <li>MyBatis映射文件用于编写SQL，访问以及操作表中的数据</li> <li>MyBatis映射文件存放的位置是src/main/resources/mappers目录下</li></ul></li> <li><p>MyBatis中可以面向接口操作数据，要保证两个一致</p> <ul><li>mapper接口的全类名和映射文件的命名空间（namespace）保持一致</li> <li>mapper接口中方法的方法名和映射文件中编写SQL的标签的id属性保持一致</li></ul></li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token operator">&lt;</span><span class="token operator">?</span>xml version<span class="token operator">=</span><span class="token string">&quot;1.0&quot;</span> encoding<span class="token operator">=</span><span class="token string">&quot;UTF-8&quot;</span> <span class="token operator">?</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token constant">DOCTYPE</span> mapper
        <span class="token constant">PUBLIC</span> <span class="token string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span>
        <span class="token string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>mapper namespace<span class="token operator">=</span><span class="token string">&quot;cn.lanqiao.mapper.UserMapper&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span><span class="token keyword">int</span> <span class="token function">insertUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token operator">--</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>insert id<span class="token operator">=</span><span class="token string">&quot;insertUser&quot;</span><span class="token operator">&gt;</span>
        insert into account <span class="token function">values</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span><span class="token char">'王五'</span><span class="token punctuation">,</span><span class="token number">3000</span><span class="token punctuation">)</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>insert<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>mapper<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h2 id="通过junit测试功能"><a href="#通过junit测试功能" class="header-anchor">#</a> 通过junit测试功能</h2> <ul><li><p>SqlSession：代表Java程序和数据库之间的会话。（HttpSession是Java程序和浏览器之间的会话）</p></li> <li><p>SqlSessionFactory：是“生产”SqlSession的“工厂”</p></li> <li><p>工厂模式：如果创建某一个对象，使用的过程基本固定，那么我们就可以把创建这个对象的相关代码封装到一个“工厂类”中，以后都使用这个工厂类来“生产”我们需要的对象</p></li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MybatisTest</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testMybatis</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">{</span>
        <span class="token comment">//根据字节输入流的方式读取MyBatis的核心配置文件</span>
        <span class="token class-name">InputStream</span> is <span class="token operator">=</span> <span class="token class-name">Resources</span><span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span><span class="token string">&quot;mybatis-config.xml&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//获取SqlSessionFactoryBuilder对象</span>
        <span class="token class-name">SqlSessionFactoryBuilder</span> sqlSessionFactoryBuilder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SqlSessionFactoryBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//通过核心配置文件所对应的字节输入流创建工厂类SqlSessionFactory，生产SqlSession对象</span>
        <span class="token class-name">SqlSessionFactory</span> sqlSessionFactory <span class="token operator">=</span> sqlSessionFactoryBuilder<span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span>is<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//获取sqlSession，此时通过SqlSession对象所操作的sql都必须手动提交或回滚事务</span>
        <span class="token comment">//SqlSession sqlSession = sqlSessionFactory.openSession();</span>
        <span class="token comment">//创建SqlSession对象，此时通过SqlSession对象所操作的sql都会自动提交</span>
        <span class="token class-name">SqlSession</span> sqlSession <span class="token operator">=</span> sqlSessionFactory<span class="token punctuation">.</span><span class="token function">openSession</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//通过代理模式创建UserMapper接口的代理实现类对象</span>
        <span class="token class-name">UserMapper</span> userMapper <span class="token operator">=</span> sqlSession<span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">UserMapper</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//调用UserMapper接口中的方法，就可以根据UserMapper的全类名匹配元素文件，通过调用的方法名匹配映射文件中的SQL标签，并执行标签中的SQL语句</span>
        <span class="token keyword">int</span> result <span class="token operator">=</span> userMapper<span class="token punctuation">.</span><span class="token function">insertUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//提交事务</span>
        <span class="token comment">//sqlSession.commit();</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;result:&quot;</span> <span class="token operator">+</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><ul><li>此时需要手动提交事务，如果要自动提交事务，则在获取sqlSession对象时，使用<code>SqlSession sqlSession = sqlSessionFactory.openSession(true);</code>，传入一个Boolean类型的参数，值为true，这样就可以自动提交</li></ul> <h2 id="加入log4j日志功能"><a href="#加入log4j日志功能" class="header-anchor">#</a> 加入log4j日志功能</h2> <p>1.加入依赖</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> log4j日志 <span class="token operator">--</span><span class="token operator">&gt;</span>
<span class="token generics"><span class="token punctuation">&lt;</span>dependency<span class="token punctuation">&gt;</span></span>
	<span class="token generics"><span class="token punctuation">&lt;</span>groupId<span class="token punctuation">&gt;</span></span>log4j<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">&gt;</span>
	<span class="token generics"><span class="token punctuation">&lt;</span>artifactId<span class="token punctuation">&gt;</span></span>log4j<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">&gt;</span>
	<span class="token generics"><span class="token punctuation">&lt;</span>version<span class="token punctuation">&gt;</span></span><span class="token number">1.2</span><span class="token number">.17</span><span class="token operator">&lt;</span><span class="token operator">/</span>version<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>dependency<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>2.加入log4j的配置文件</p> <ul><li>log4j的配置文件名为log4j.xml，存放的位置是src/main/resources目录下</li> <li>日志的级别：FATAL(致命)&gt;ERROR(错误)&gt;WARN(警告)&gt;INFO(信息)&gt;DEBUG(调试) 从左到右打印的内容越来越详细</li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token operator">&lt;</span><span class="token operator">?</span>xml version<span class="token operator">=</span><span class="token string">&quot;1.0&quot;</span> encoding<span class="token operator">=</span><span class="token string">&quot;UTF-8&quot;</span> <span class="token operator">?</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token constant">DOCTYPE</span> log4j<span class="token operator">:</span>configuration <span class="token constant">SYSTEM</span> <span class="token string">&quot;log4j.dtd&quot;</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>log4j<span class="token operator">:</span>configuration xmlns<span class="token operator">:</span>log4j<span class="token operator">=</span><span class="token string">&quot;http://jakarta.apache.org/log4j/&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>appender name<span class="token operator">=</span><span class="token string">&quot;STDOUT&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;org.apache.log4j.ConsoleAppender&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>param name<span class="token operator">=</span><span class="token string">&quot;Encoding&quot;</span> value<span class="token operator">=</span><span class="token string">&quot;UTF-8&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>layout <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;org.apache.log4j.PatternLayout&quot;</span><span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span>param name<span class="token operator">=</span><span class="token string">&quot;ConversionPattern&quot;</span> value<span class="token operator">=</span><span class="token string">&quot;%-5p %d{MM-dd HH:mm:ss,SSS} %m (%F:%L) \n&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>layout<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>appender<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>logger name<span class="token operator">=</span><span class="token string">&quot;java.sql&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>level value<span class="token operator">=</span><span class="token string">&quot;debug&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>logger<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>logger name<span class="token operator">=</span><span class="token string">&quot;org.apache.ibatis&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>level value<span class="token operator">=</span><span class="token string">&quot;info&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>logger<span class="token operator">&gt;</span>
    <span class="token generics"><span class="token punctuation">&lt;</span>root<span class="token punctuation">&gt;</span></span>
        <span class="token operator">&lt;</span>level value<span class="token operator">=</span><span class="token string">&quot;debug&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>appender<span class="token operator">-</span>ref ref<span class="token operator">=</span><span class="token string">&quot;STDOUT&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>root<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>log4j<span class="token operator">:</span>configuration<span class="token operator">&gt;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><blockquote><h2 id="日志级别"><a href="#日志级别" class="header-anchor">#</a> 日志级别:</h2> <p>FATAL(致命的)&gt;ERROR(错误的)&gt;WARN(警告)&gt;INFO(信息)&gt;DEBUG(调试)</p> <p>从左到右打印的内容越来越详细</p></blockquote> <h1 id="mybatis的crud"><a href="#mybatis的crud" class="header-anchor">#</a> Mybatis的CRUD</h1> <h2 id="user"><a href="#user" class="header-anchor">#</a> User</h2> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">cn<span class="token punctuation">.</span>lanqiao<span class="token punctuation">.</span>pojo</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> id<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> money<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;User{&quot;</span> <span class="token operator">+</span>
                <span class="token string">&quot;id=&quot;</span> <span class="token operator">+</span> id <span class="token operator">+</span>
                <span class="token string">&quot;, name='&quot;</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token char">'\''</span> <span class="token operator">+</span>
                <span class="token string">&quot;, money=&quot;</span> <span class="token operator">+</span> money <span class="token operator">+</span>
                <span class="token char">'}'</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> id<span class="token punctuation">,</span> <span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">Integer</span> money<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">=</span> id<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>money <span class="token operator">=</span> money<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Integer</span> <span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> id<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setId</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">=</span> id<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setName</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Integer</span> <span class="token function">getMoney</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> money<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setMoney</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> money<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>money <span class="token operator">=</span> money<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br></div></div><h2 id="usermapper"><a href="#usermapper" class="header-anchor">#</a> UserMapper</h2> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">cn<span class="token punctuation">.</span>lanqiao<span class="token punctuation">.</span>mapper</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">cn<span class="token punctuation">.</span>lanqiao<span class="token punctuation">.</span>pojo<span class="token punctuation">.</span></span><span class="token class-name">User</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">UserMapper</span> <span class="token punctuation">{</span>
    <span class="token comment">/**
     * 添加用户信息
     */</span>
    <span class="token keyword">int</span> <span class="token function">insertUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">/**
     *
     * 修改用户信息
     * @return
     */</span>
    <span class="token keyword">int</span> <span class="token function">updateUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">/**
     *
     * 删除用户
     */</span>
    <span class="token keyword">int</span> <span class="token function">deleteUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">/**
     * 根据id查询用户信息
     */</span>
    <span class="token class-name">User</span> <span class="token function">getUserByid</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token comment">/**
     * 查询所有用户的信息
     */</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> <span class="token function">getAllUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br></div></div><h2 id="mybatis-config-xml配置文件"><a href="#mybatis-config-xml配置文件" class="header-anchor">#</a> mybatis-config.xml配置文件</h2> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token operator">&lt;</span><span class="token operator">?</span>xml version<span class="token operator">=</span><span class="token string">&quot;1.0&quot;</span> encoding<span class="token operator">=</span><span class="token string">&quot;UTF-8&quot;</span> <span class="token operator">?</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token constant">DOCTYPE</span> mapper
        <span class="token constant">PUBLIC</span> <span class="token string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span>
        <span class="token string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>mapper namespace<span class="token operator">=</span><span class="token string">&quot;cn.lanqiao.mapper.UserMapper&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span><span class="token keyword">int</span> <span class="token function">insertUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token operator">--</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>insert id<span class="token operator">=</span><span class="token string">&quot;insertUser&quot;</span><span class="token operator">&gt;</span>
        insert into account <span class="token function">values</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span><span class="token char">'王五'</span><span class="token punctuation">,</span><span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>insert<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>update id<span class="token operator">=</span><span class="token string">&quot;updateUser&quot;</span><span class="token operator">&gt;</span>
        <span class="token constant">UPDATE</span> account <span class="token class-name">SET</span> name<span class="token operator">=</span><span class="token char">'张四'</span><span class="token punctuation">,</span>money <span class="token operator">=</span> <span class="token number">3000</span> <span class="token class-name">WHERE</span> id <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>update<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>delete id<span class="token operator">=</span><span class="token string">&quot;deleteUser&quot;</span><span class="token operator">&gt;</span>
        <span class="token constant">DELETE</span> from account where id <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>delete<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>
    查询功能的标签必须要设置resultMap或者resultType
    resultType<span class="token operator">:</span>设置默认的映射关系
    resultMap：设置自定义的映射关系
    <span class="token operator">--</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>select id<span class="token operator">=</span><span class="token string">&quot;getUserByid&quot;</span> resultType<span class="token operator">=</span><span class="token string">&quot;cn.lanqiao.pojo.User&quot;</span><span class="token operator">&gt;</span>
        <span class="token constant">SELECT</span> <span class="token operator">*</span> <span class="token constant">FROM</span> account where id <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>select<span class="token operator">&gt;</span>
    
    <span class="token operator">&lt;</span>select id<span class="token operator">=</span><span class="token string">&quot;getAllUser&quot;</span> resultType<span class="token operator">=</span><span class="token string">&quot;cn.lanqiao.pojo.User&quot;</span><span class="token operator">&gt;</span>
        <span class="token constant">SELECT</span> <span class="token operator">*</span> <span class="token class-name">FROM</span> account<span class="token punctuation">;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>select<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>mapper<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><h2 id="测试类"><a href="#测试类" class="header-anchor">#</a> 测试类</h2> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">org<span class="token punctuation">.</span>lanqiao<span class="token punctuation">.</span>test</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">cn<span class="token punctuation">.</span>lanqiao<span class="token punctuation">.</span>mapper<span class="token punctuation">.</span></span><span class="token class-name">UserMapper</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">cn<span class="token punctuation">.</span>lanqiao<span class="token punctuation">.</span>pojo<span class="token punctuation">.</span></span><span class="token class-name">User</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">Resources</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>session<span class="token punctuation">.</span></span><span class="token class-name">SqlSession</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>session<span class="token punctuation">.</span></span><span class="token class-name">SqlSessionFactory</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>session<span class="token punctuation">.</span></span><span class="token class-name">SqlSessionFactoryBuilder</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span></span><span class="token class-name">Test</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">InputStream</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MybatisTest</span> <span class="token punctuation">{</span>
    <span class="token comment">//添加</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testMybatis</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">{</span>
        <span class="token comment">//读取MyBatis的核心配置文件</span>
        <span class="token class-name">InputStream</span> is <span class="token operator">=</span> <span class="token class-name">Resources</span><span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span><span class="token string">&quot;mybatis-config.xml&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//获取SqlSessionFactoryBuilder对象</span>
        <span class="token class-name">SqlSessionFactoryBuilder</span> sqlSessionFactoryBuilder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SqlSessionFactoryBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//通过核心配置文件所对应的字节输入流创建工厂类SqlSessionFactory，生产SqlSession对象</span>
        <span class="token class-name">SqlSessionFactory</span> sqlSessionFactory <span class="token operator">=</span> sqlSessionFactoryBuilder<span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span>is<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//获取sqlSession，此时通过SqlSession对象所操作的sql都必须手动提交或回滚事务</span>
        <span class="token comment">//SqlSession sqlSession = sqlSessionFactory.openSession();</span>
        <span class="token comment">//创建SqlSession对象，此时通过SqlSession对象所操作的sql都会自动提交</span>
        <span class="token class-name">SqlSession</span> sqlSession <span class="token operator">=</span> sqlSessionFactory<span class="token punctuation">.</span><span class="token function">openSession</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//通过代理模式创建UserMapper接口的代理实现类对象</span>
        <span class="token class-name">UserMapper</span> userMapper <span class="token operator">=</span> sqlSession<span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">UserMapper</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//调用UserMapper接口中的方法，就可以根据UserMapper的全类名匹配元素文件，通过调用的方法名匹配映射文件中的SQL标签，并执行标签中的SQL语句</span>
        <span class="token keyword">int</span> result <span class="token operator">=</span> userMapper<span class="token punctuation">.</span><span class="token function">insertUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//提交事务</span>
        <span class="token comment">//sqlSession.commit();</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;result:&quot;</span> <span class="token operator">+</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//修改</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token class-name">InputStream</span> is <span class="token operator">=</span> <span class="token class-name">Resources</span><span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span><span class="token string">&quot;mybatis-config.xml&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">SqlSessionFactoryBuilder</span> sqlSessionFactoryBuilder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SqlSessionFactoryBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">SqlSessionFactory</span> sqlSessionFactory <span class="token operator">=</span> sqlSessionFactoryBuilder<span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span>is<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">SqlSession</span> sqlSession <span class="token operator">=</span> sqlSessionFactory<span class="token punctuation">.</span><span class="token function">openSession</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">UserMapper</span> userMapper <span class="token operator">=</span> sqlSession<span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">UserMapper</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> result <span class="token operator">=</span> userMapper<span class="token punctuation">.</span><span class="token function">updateUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//sqlSession.commit();</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;result:&quot;</span> <span class="token operator">+</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//删除</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testDelect</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">{</span>
        <span class="token class-name">InputStream</span> is <span class="token operator">=</span> <span class="token class-name">Resources</span><span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span><span class="token string">&quot;mybatis-config.xml&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">SqlSessionFactoryBuilder</span> sqlSessionFactoryBuilder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SqlSessionFactoryBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">SqlSessionFactory</span> sqlSessionFactory <span class="token operator">=</span> sqlSessionFactoryBuilder<span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span>is<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">SqlSession</span> sqlSession <span class="token operator">=</span> sqlSessionFactory<span class="token punctuation">.</span><span class="token function">openSession</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">UserMapper</span> userMapper <span class="token operator">=</span> sqlSession<span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">UserMapper</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> result <span class="token operator">=</span> userMapper<span class="token punctuation">.</span><span class="token function">deleteUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//sqlSession.commit();</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;result:&quot;</span> <span class="token operator">+</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token comment">//查询</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testSelect</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token class-name">InputStream</span> is <span class="token operator">=</span> <span class="token class-name">Resources</span><span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span><span class="token string">&quot;mybatis-config.xml&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">SqlSessionFactoryBuilder</span> sqlSessionFactoryBuilder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SqlSessionFactoryBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">SqlSessionFactory</span> sqlSessionFactory <span class="token operator">=</span> sqlSessionFactoryBuilder<span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span>is<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">SqlSession</span> sqlSession <span class="token operator">=</span> sqlSessionFactory<span class="token punctuation">.</span><span class="token function">openSession</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">UserMapper</span> userMapper <span class="token operator">=</span> sqlSession<span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">UserMapper</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">User</span> result <span class="token operator">=</span> userMapper<span class="token punctuation">.</span><span class="token function">getUserByid</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//sqlSession.commit();</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;result:&quot;</span> <span class="token operator">+</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token annotation punctuation">@Test</span>
    <span class="token comment">//查询所有</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testSelectAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token class-name">InputStream</span> is <span class="token operator">=</span> <span class="token class-name">Resources</span><span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span><span class="token string">&quot;mybatis-config.xml&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">SqlSessionFactoryBuilder</span> sqlSessionFactoryBuilder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SqlSessionFactoryBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">SqlSessionFactory</span> sqlSessionFactory <span class="token operator">=</span> sqlSessionFactoryBuilder<span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span>is<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">SqlSession</span> sqlSession <span class="token operator">=</span> sqlSessionFactory<span class="token punctuation">.</span><span class="token function">openSession</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">UserMapper</span> userMapper <span class="token operator">=</span> sqlSession<span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">UserMapper</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> allUser <span class="token operator">=</span> userMapper<span class="token punctuation">.</span><span class="token function">getAllUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//sqlSession.commit();</span>
        allUser<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>user <span class="token operator">-&gt;</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;result:&quot;</span> <span class="token operator">+</span> user<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br></div></div><div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">org<span class="token punctuation">.</span>lanqiao<span class="token punctuation">.</span>utils</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">Resources</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>session<span class="token punctuation">.</span></span><span class="token class-name">SqlSession</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>session<span class="token punctuation">.</span></span><span class="token class-name">SqlSessionFactory</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>session<span class="token punctuation">.</span></span><span class="token class-name">SqlSessionFactoryBuilder</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SqlSessionUtil</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">SqlSessionUtil</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//构造方法私有化</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">SqlSessionFactory</span> sqlSessionFactory<span class="token punctuation">;</span>

    <span class="token comment">//类加载的时候执行</span>
    <span class="token keyword">static</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            sqlSessionFactory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SqlSessionFactoryBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token class-name">Resources</span><span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span><span class="token string">&quot;mybatis-config.xml&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * 获取SqlSession会话
     * @return SqlSession对象
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">SqlSession</span> <span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> sqlSessionFactory<span class="token punctuation">.</span><span class="token function">openSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br></div></div><div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SqlSessionUtils</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">SqlSession</span> <span class="token function">getSqlSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">{</span>
        <span class="token class-name">SqlSession</span> sqlSession <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">InputStream</span> resourceAsStream <span class="token operator">=</span> <span class="token class-name">Resources</span><span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span><span class="token string">&quot;mybatis-config.xml&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">SqlSessionFactory</span> sqlSessionFactory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SqlSessionFactoryBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span>resourceAsStream<span class="token punctuation">)</span><span class="token punctuation">;</span>
            sqlSession <span class="token operator">=</span> sqlSessionFactory<span class="token punctuation">.</span><span class="token function">openSession</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> sqlSession<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h1 id="mybatis核心配置文件之properties"><a href="#mybatis核心配置文件之properties" class="header-anchor">#</a> Mybatis核心配置文件之Properties</h1> <h2 id="jdbc-properties"><a href="#jdbc-properties" class="header-anchor">#</a> jdbc.properties</h2> <div class="language- line-numbers-mode"><pre class="language-text"><code>jdbc.driver=com.mysql.cj.jdbc.Driver
jdbc.url=jdbc:mysql://localhost:3306/lanqiao?serverTimezone=GMT
jdbc.username=root
jdbc.password=123456
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="mybatis-config-xml"><a href="#mybatis-config-xml" class="header-anchor">#</a> Mybatis-config.xml</h2> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>需要在configuration标签中添加上这样一段代码<span class="token operator">--</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>引入properties文件 <span class="token operator">--</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>properties resource<span class="token operator">=</span><span class="token string">&quot;jdbc.properties&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>property name<span class="token operator">=</span><span class="token string">&quot;driver&quot;</span> value<span class="token operator">=</span><span class="token string">&quot;${jdbc.driver}&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>property name<span class="token operator">=</span><span class="token string">&quot;url&quot;</span> value<span class="token operator">=</span><span class="token string">&quot;${jdbc.url}&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>property name<span class="token operator">=</span><span class="token string">&quot;username&quot;</span> value<span class="token operator">=</span><span class="token string">&quot;${jdbc.username}&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>property name<span class="token operator">=</span><span class="token string">&quot;password&quot;</span> value<span class="token operator">=</span><span class="token string">&quot;${jdbc.password}&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h1 id="mybatis核心配置文件之typealiases"><a href="#mybatis核心配置文件之typealiases" class="header-anchor">#</a> Mybatis核心配置文件之typeAliases</h1> <blockquote><p>核心配置文件中的标签必须按照固定的顺序(有的标签可以不写，但顺序一定不能乱)：
properties、settings、typeAliases、typeHandlers、objectFactory、objectWrapperFactory、reflectorFactory、plugins、environments、databaseIdProvider、mappers</p></blockquote> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token generics"><span class="token punctuation">&lt;</span>typeAliases<span class="token punctuation">&gt;</span></span>
        <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>
        typeAlias：设置某个具体的类型的别名
        属性：
        type：需要设置别名的类型的全类名
        alias：设置此类型的别名，且别名不区分大小写。若不设置此属性，该类型拥有默认的别名，即类名
        <span class="token operator">--</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span><span class="token operator">&lt;</span>typeAlias type<span class="token operator">=</span><span class="token string">&quot;com.atguigu.mybatis.bean.User&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>typeAlias<span class="token operator">&gt;</span><span class="token operator">--</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span><span class="token operator">&lt;</span>typeAlias type<span class="token operator">=</span><span class="token string">&quot;com.atguigu.mybatis.bean.User&quot;</span> alias<span class="token operator">=</span><span class="token string">&quot;user&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>typeAlias<span class="token operator">&gt;</span><span class="token operator">--</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>以包为单位，设置改包下所有的类型都拥有默认的别名，即类名且不区分大小写<span class="token operator">--</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token keyword">package</span> <span class="token namespace">name</span><span class="token operator">=</span><span class="token string">&quot;com.atguigu.mybatis.bean&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>typeAliases<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>设置了类型别名之后，可以代替</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token operator">&lt;</span>select id<span class="token operator">=</span><span class="token string">&quot;getAllUser&quot;</span> resultType<span class="token operator">=</span><span class="token string">&quot;User&quot;</span><span class="token operator">&gt;</span>
        <span class="token constant">SELECT</span> <span class="token operator">*</span> <span class="token class-name">FROM</span> account<span class="token punctuation">;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>select<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h1 id="核心配置文件详解"><a href="#核心配置文件详解" class="header-anchor">#</a> 核心配置文件详解</h1> <blockquote><p>核心配置文件中的标签必须按照固定的顺序(有的标签可以不写，但顺序一定不能乱)：
properties、settings、typeAliases、typeHandlers、objectFactory、objectWrapperFactory、reflectorFactory、plugins、environments、databaseIdProvider、mappers</p></blockquote> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>
<span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">configuration</span>
        <span class="token name">PUBLIC</span> <span class="token string">&quot;-//MyBatis.org//DTD Config 3.0//EN&quot;</span>
        <span class="token string">&quot;http://MyBatis.org/dtd/MyBatis-3-config.dtd&quot;</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--引入properties文件，此时就可以${属性名}的方式访问属性值--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span> <span class="token attr-name">resource</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>jdbc.properties<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>settings</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--将表中字段的下划线自动转换为驼峰--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>setting</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mapUnderscoreToCamelCase<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token comment">&lt;!--开启延迟加载--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>setting</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>lazyLoadingEnabled<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>settings</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>typeAliases</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--
        typeAlias：设置某个具体的类型的别名
        属性：
        type：需要设置别名的类型的全类名
        alias：设置此类型的别名，且别名不区分大小写。若不设置此属性，该类型拥有默认的别名，即类名
        --&gt;</span>
        <span class="token comment">&lt;!--&lt;typeAlias type=&quot;com.atguigu.mybatis.bean.User&quot;&gt;&lt;/typeAlias&gt;--&gt;</span>
        <span class="token comment">&lt;!--&lt;typeAlias type=&quot;com.atguigu.mybatis.bean.User&quot; alias=&quot;user&quot;&gt;
        &lt;/typeAlias&gt;--&gt;</span>
        <span class="token comment">&lt;!--以包为单位，设置改包下所有的类型都拥有默认的别名，即类名且不区分大小写--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>package</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.atguigu.mybatis.bean<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>typeAliases</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--
    environments：设置多个连接数据库的环境
    属性：
	    default：设置默认使用的环境的id
    --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>environments</span> <span class="token attr-name">default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mysql_test<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--
        environment：设置具体的连接数据库的环境信息
        属性：
	        id：设置环境的唯一标识，可通过environments标签中的default设置某一个环境的id，表示默认使用的环境
        --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>environment</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mysql_test<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token comment">&lt;!--
            transactionManager：设置事务管理方式
            属性：
	            type：设置事务管理方式，type=&quot;JDBC|MANAGED&quot;
	            type=&quot;JDBC&quot;：设置当前环境的事务管理都必须手动处理
	            type=&quot;MANAGED&quot;：设置事务被管理，例如spring中的AOP
            --&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>transactionManager</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>JDBC<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
            <span class="token comment">&lt;!--
            dataSource：设置数据源
            属性：
	            type：设置数据源的类型，type=&quot;POOLED|UNPOOLED|JNDI&quot;
	            type=&quot;POOLED&quot;：使用数据库连接池，即会将创建的连接进行缓存，下次使用可以从缓存中直接获取，不需要重新创建
	            type=&quot;UNPOOLED&quot;：不使用数据库连接池，即每次使用连接都需要重新创建
	            type=&quot;JNDI&quot;：调用上下文中的数据源
            --&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dataSource</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>POOLED<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                <span class="token comment">&lt;!--设置驱动类的全类名--&gt;</span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>driver<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${jdbc.driver}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
                <span class="token comment">&lt;!--设置连接数据库的连接地址--&gt;</span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>url<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${jdbc.url}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
                <span class="token comment">&lt;!--设置连接数据库的用户名--&gt;</span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>username<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${jdbc.username}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
                <span class="token comment">&lt;!--设置连接数据库的密码--&gt;</span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${jdbc.password}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dataSource</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>environment</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>environments</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--引入映射文件--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mappers</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- &lt;mapper resource=&quot;UserMapper.xml&quot;/&gt; --&gt;</span>
        <span class="token comment">&lt;!--
        以包为单位，将包下所有的映射文件引入核心配置文件
        注意：
			1. 此方式必须保证mapper接口和mapper映射文件必须在相同的包下
			2. mapper接口要和mapper映射文件的名字一致
        --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>package</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.atguigu.mybatis.mapper<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mappers</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br></div></div><h1 id="在idea中设置核心配置文件的模版"><a href="#在idea中设置核心配置文件的模版" class="header-anchor">#</a> 在idea中设置核心配置文件的模版</h1> <h1 id="在idea中设置映射文件的模版"><a href="#在idea中设置映射文件的模版" class="header-anchor">#</a> 在idea中设置映射文件的模版</h1> <h1 id="封装sqlsessionutils工具类"><a href="#封装sqlsessionutils工具类" class="header-anchor">#</a> 封装sqlSessionUtils工具类</h1> <h1 id="mybatis获取参数值的两种方式-重点"><a href="#mybatis获取参数值的两种方式-重点" class="header-anchor">#</a> MyBatis获取参数值的两种方式（重点）</h1> <ul><li>MyBatis获取参数值的两种方式：${}和#{}</li> <li>${}的本质就是字符串拼接，#{}的本质就是占位符赋值</li> <li>${}使用字符串拼接的方式拼接sql，若为字符串类型或日期类型的字段进行赋值时，需要手动加单引号；但是#{}使用占位符赋值的方式拼接sql，此时为字符串类型或日期类型的字段进行赋值时，可以自动添加单引号</li></ul> <h2 id="mapper接口方法的参数为单个的字面量类型"><a href="#mapper接口方法的参数为单个的字面量类型" class="header-anchor">#</a> Mapper接口方法的参数为单个的字面量类型</h2> <h3 id="用户名查询信息"><a href="#用户名查询信息" class="header-anchor">#</a> 用户名查询信息</h3> <div class="language-java line-numbers-mode"><pre class="language-java"><code>	<span class="token operator">&lt;</span>select id<span class="token operator">=</span><span class="token string">&quot;getUserByUserName&quot;</span> resultType<span class="token operator">=</span><span class="token string">&quot;cn.lanqiao.pojo.User&quot;</span><span class="token operator">&gt;</span>
        <span class="token constant">SELECT</span> <span class="token operator">*</span> <span class="token constant">FROM</span> account where name <span class="token operator">=</span> #<span class="token punctuation">{</span>name<span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>select<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="language-java line-numbers-mode"><pre class="language-java"><code>	<span class="token annotation punctuation">@Test</span>
    <span class="token comment">//根据用户名查询信息</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testgetUserByUserName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token class-name">InputStream</span> is <span class="token operator">=</span> <span class="token class-name">Resources</span><span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span><span class="token string">&quot;mybatis-config.xml&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">SqlSessionFactoryBuilder</span> sqlSessionFactoryBuilder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SqlSessionFactoryBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">SqlSessionFactory</span> sqlSessionFactory <span class="token operator">=</span> sqlSessionFactoryBuilder<span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span>is<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">SqlSession</span> sqlSession <span class="token operator">=</span> sqlSessionFactory<span class="token punctuation">.</span><span class="token function">openSession</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">UserMapper</span> userMapper <span class="token operator">=</span> sqlSession<span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">UserMapper</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">User</span> userAll <span class="token operator">=</span> userMapper<span class="token punctuation">.</span><span class="token function">getUserByUserName</span><span class="token punctuation">(</span><span class="token string">&quot;张三&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>userAll<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//sqlSession.commit();</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h2 id="mapper接口方法的参数为多个时"><a href="#mapper接口方法的参数为多个时" class="header-anchor">#</a> mapper接口方法的参数为多个时</h2> <h3 id="登录功能"><a href="#登录功能" class="header-anchor">#</a> 登录功能</h3> <p>a&gt;以arg0,arg1...为键，以参数为值</p> <p>b&gt;以param1，param2...为键，以参数为值</p> <p>因此只需要通过#{}或者${}以键的方式访问值即可，但是需要注意${}的单引号问题</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>	<span class="token operator">&lt;</span>select id<span class="token operator">=</span><span class="token string">&quot;userLogin&quot;</span> resultType<span class="token operator">=</span><span class="token string">&quot;cn.lanqiao.pojo.User&quot;</span><span class="token operator">&gt;</span>
        <span class="token constant">SELECT</span> <span class="token operator">*</span> <span class="token constant">FROM</span> account where name <span class="token operator">=</span> #<span class="token punctuation">{</span>arg0<span class="token punctuation">}</span> <span class="token class-name">AND</span> password <span class="token operator">=</span> #<span class="token punctuation">{</span>arg1<span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>select<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
    <span class="token comment">//登录功能</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token class-name">TestLogin</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token class-name">InputStream</span> is <span class="token operator">=</span> <span class="token class-name">Resources</span><span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span><span class="token string">&quot;mybatis-config.xml&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">SqlSessionFactoryBuilder</span> sqlSessionFactoryBuilder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SqlSessionFactoryBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">SqlSessionFactory</span> sqlSessionFactory <span class="token operator">=</span> sqlSessionFactoryBuilder<span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span>is<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">SqlSession</span> sqlSession <span class="token operator">=</span> sqlSessionFactory<span class="token punctuation">.</span><span class="token function">openSession</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">UserMapper</span> userMapper <span class="token operator">=</span> sqlSession<span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">UserMapper</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">User</span> userAll <span class="token operator">=</span> userMapper<span class="token punctuation">.</span><span class="token function">userLogin</span><span class="token punctuation">(</span><span class="token string">&quot;张三&quot;</span><span class="token punctuation">,</span><span class="token number">123456</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>userAll<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//sqlSession.commit();</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h2 id="mapper接口方法的参数有多个时-可以手动将这些参数放在一个map中存储"><a href="#mapper接口方法的参数有多个时-可以手动将这些参数放在一个map中存储" class="header-anchor">#</a> mapper接口方法的参数有多个时，可以手动将这些参数放在一个map中存储</h2> <h3 id="验证登录"><a href="#验证登录" class="header-anchor">#</a> 验证登录</h3> <p>因此只需要通过#{}或者${}以键的方式访问值即可，但是需要注意${}的单引号问题</p> <p>userMapper</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>	<span class="token comment">/**
     *验证登录(map版本)
     *
     */</span>
    <span class="token class-name">User</span> <span class="token function">userLoginMap</span><span class="token punctuation">(</span><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> map<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>userMapper.xml</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token operator">&lt;</span>select id<span class="token operator">=</span><span class="token string">&quot;userLoginMap&quot;</span> resultType<span class="token operator">=</span><span class="token string">&quot;cn.lanqiao.pojo.User&quot;</span><span class="token operator">&gt;</span>
        <span class="token constant">SELECT</span> <span class="token operator">*</span> <span class="token constant">FROM</span> account where name <span class="token operator">=</span> #<span class="token punctuation">{</span>name<span class="token punctuation">}</span> <span class="token class-name">AND</span> password <span class="token operator">=</span> #<span class="token punctuation">{</span>password<span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>select<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>test</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>	<span class="token annotation punctuation">@Test</span>
    <span class="token comment">//登录功能Map</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token class-name">TestLoginMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token class-name">InputStream</span> is <span class="token operator">=</span> <span class="token class-name">Resources</span><span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span><span class="token string">&quot;mybatis-config.xml&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">SqlSessionFactoryBuilder</span> sqlSessionFactoryBuilder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SqlSessionFactoryBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">SqlSessionFactory</span> sqlSessionFactory <span class="token operator">=</span> sqlSessionFactoryBuilder<span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span>is<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">SqlSession</span> sqlSession <span class="token operator">=</span> sqlSessionFactory<span class="token punctuation">.</span><span class="token function">openSession</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">UserMapper</span> userMapper <span class="token operator">=</span> sqlSession<span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">UserMapper</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;张三&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;password&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;123456&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">User</span> userAll <span class="token operator">=</span> userMapper<span class="token punctuation">.</span><span class="token function">userLoginMap</span><span class="token punctuation">(</span>map<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>userAll<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//sqlSession.commit();</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h2 id="_4-mapper接口方法的参数是实体类类型的参数"><a href="#_4-mapper接口方法的参数是实体类类型的参数" class="header-anchor">#</a> 4.mapper接口方法的参数是实体类类型的参数</h2> <p>因此只需要通过#{}或者${}以键的方式访问值即可，但是需要注意${}的单引号问题</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>	<span class="token operator">&lt;</span>insert id<span class="token operator">=</span><span class="token string">&quot;insertUserInformation&quot;</span><span class="token operator">&gt;</span>
        insert into account <span class="token function">values</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span>#<span class="token punctuation">{</span>name<span class="token punctuation">}</span><span class="token punctuation">,</span>#<span class="token punctuation">{</span>money<span class="token punctuation">}</span><span class="token punctuation">,</span>#<span class="token punctuation">{</span>password<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>insert<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="language-java line-numbers-mode"><pre class="language-java"><code>	<span class="token annotation punctuation">@Test</span>
    <span class="token comment">//用户添加功能</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token class-name">TestinsertUserInformation</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token class-name">InputStream</span> is <span class="token operator">=</span> <span class="token class-name">Resources</span><span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span><span class="token string">&quot;mybatis-config.xml&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">SqlSessionFactoryBuilder</span> sqlSessionFactoryBuilder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SqlSessionFactoryBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">SqlSessionFactory</span> sqlSessionFactory <span class="token operator">=</span> sqlSessionFactoryBuilder<span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span>is<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">SqlSession</span> sqlSession <span class="token operator">=</span> sqlSessionFactory<span class="token punctuation">.</span><span class="token function">openSession</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">UserMapper</span> userMapper <span class="token operator">=</span> sqlSession<span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">UserMapper</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> result <span class="token operator">=</span> userMapper<span class="token punctuation">.</span><span class="token function">insertUserInformation</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token string">&quot;王五&quot;</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">,</span> <span class="token number">123456</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//sqlSession.commit();</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h2 id="_5-使用-param注解命名参数"><a href="#_5-使用-param注解命名参数" class="header-anchor">#</a> 5.使用@Param注解命名参数</h2> <h3 id="验证登录-使用-param"><a href="#验证登录-使用-param" class="header-anchor">#</a> 验证登录(使用@Param)</h3> <div class="language-java line-numbers-mode"><pre class="language-java"><code> <span class="token comment">/**
     * 验证登录(使用@Param)
     */</span>
    <span class="token class-name">User</span> <span class="token function">checkLoginByParam</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span> name<span class="token punctuation">,</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;password&quot;</span><span class="token punctuation">)</span> <span class="token keyword">int</span> password<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token operator">&lt;</span>select id<span class="token operator">=</span><span class="token string">&quot;checkLoginByParam&quot;</span> resultType<span class="token operator">=</span><span class="token string">&quot;cn.lanqiao.pojo.User&quot;</span><span class="token operator">&gt;</span>
        <span class="token constant">SELECT</span> <span class="token operator">*</span> <span class="token constant">FROM</span> account where name <span class="token operator">=</span> #<span class="token punctuation">{</span>name<span class="token punctuation">}</span> <span class="token class-name">AND</span> password <span class="token operator">=</span> #<span class="token punctuation">{</span>password<span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>select<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="language-java line-numbers-mode"><pre class="language-java"><code> 	<span class="token annotation punctuation">@Test</span>
    <span class="token comment">//Param查询用户</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token class-name">TestcheckLoginByParam</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token class-name">InputStream</span> is <span class="token operator">=</span> <span class="token class-name">Resources</span><span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span><span class="token string">&quot;mybatis-config.xml&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">SqlSessionFactoryBuilder</span> sqlSessionFactoryBuilder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SqlSessionFactoryBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">SqlSessionFactory</span> sqlSessionFactory <span class="token operator">=</span> sqlSessionFactoryBuilder<span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span>is<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">SqlSession</span> sqlSession <span class="token operator">=</span> sqlSessionFactory<span class="token punctuation">.</span><span class="token function">openSession</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">UserMapper</span> userMapper <span class="token operator">=</span> sqlSession<span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">UserMapper</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">User</span> result <span class="token operator">=</span> userMapper<span class="token punctuation">.</span><span class="token function">checkLoginByParam</span><span class="token punctuation">(</span><span class="token string">&quot;王五&quot;</span><span class="token punctuation">,</span> <span class="token number">123456</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//sqlSession.commit();</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h1 id="mybatis各种查询功能"><a href="#mybatis各种查询功能" class="header-anchor">#</a> Mybatis各种查询功能</h1> <h2 id="查询一个实体类对象"><a href="#查询一个实体类对象" class="header-anchor">#</a> 查询一个实体类对象</h2> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">//根据用户id查询用户信息</span>
<span class="token class-name">User</span> <span class="token function">getUserById</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span> <span class="token keyword">int</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>getUserById<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span> <span class="token attr-value"><span class="token punctuation attr-equals">=</span> <span class="token punctuation">&quot;</span>User<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
	select * from t_user where id = #{id}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><blockquote><p>若查询出来的数据只有一条，可以通过实体类接收</p> <p>如果查询出来的数据有多条，一定不能用实体类接收</p></blockquote> <h2 id="查询用户的总记录数-单行单列"><a href="#查询用户的总记录数-单行单列" class="header-anchor">#</a> 查询用户的总记录数(单行单列)</h2> <div class="language-java line-numbers-mode"><pre class="language-java"><code>	<span class="token comment">/**
     * 查询用户的总记录数
     */</span>
    <span class="token class-name">Integer</span> <span class="token function">getCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language-java line-numbers-mode"><pre class="language-java"><code> 	<span class="token operator">&lt;</span>select id<span class="token operator">=</span><span class="token string">&quot;getCount&quot;</span> resultType<span class="token operator">=</span><span class="token string">&quot;java.lang.Integer&quot;</span><span class="token operator">&gt;</span>
        <span class="token class-name">SELECT</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token class-name">FROM</span> account<span class="token punctuation">;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>select<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="默认的类型别名"><a href="#默认的类型别名" class="header-anchor">#</a> 默认的类型别名</h2> <p><img alt="在这里插入图片描述" data-src="https://img-blog.csdnimg.cn/fd0b50a36358457f9d1c48dd2c3d5f2c.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA6IuN6IyX,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center" loading="lazy" class="lazy"></p> <p><img alt="在这里插入图片描述" data-src="https://img-blog.csdnimg.cn/a5042eddd8014d628fc787440925e6b7.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA6IuN6IyX,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center" loading="lazy" class="lazy"></p> <h2 id="查询map集合"><a href="#查询map集合" class="header-anchor">#</a> 查询Map集合</h2> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">//根据id查询用户信息为一个Map集合</span>
<span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> <span class="token function">getUserByIdToMap</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span> <span class="token class-name">Integer</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-xml line-numbers-mode"><pre class="language-xml"><code> 	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>getUserByIdToMap<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>map<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        select * from t_user where id = #{id}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="查询所有用户信息为map集合"><a href="#查询所有用户信息为map集合" class="header-anchor">#</a> 查询所有用户信息为Map集合</h2> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Map</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token function">getAllUserToMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-xml line-numbers-mode"><pre class="language-xml"><code> 	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>getAllUserToMap<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>map<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        select * from t_user
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h1 id="特殊sql的执行"><a href="#特殊sql的执行" class="header-anchor">#</a> 特殊SQL的执行</h1> <h2 id="mybatis处理模糊查询"><a href="#mybatis处理模糊查询" class="header-anchor">#</a> Mybatis处理模糊查询</h2> <div class="language-java line-numbers-mode"><pre class="language-java"><code>	<span class="token comment">/**
     * 根据用户名模糊查询用户信息
     */</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> <span class="token function">getUserByLike</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language-xml line-numbers-mode"><pre class="language-xml"><code>	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>getUserByLike<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cn.lanqiao.pojo.User<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        SELECT * FROM account where name like '%${name}%'
        SELECT * FROM account where name like concat('%',#{name},'%')
        SELECT * FROM account where name like &quot;%&quot;#{name}&quot;%&quot;
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="mybatis批量删除"><a href="#mybatis批量删除" class="header-anchor">#</a> Mybatis批量删除</h2> <div class="language-java line-numbers-mode"><pre class="language-java"><code>	<span class="token comment">/**
     * 批量删除
     */</span>
    <span class="token keyword">int</span> <span class="token class-name">DeleteAll</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language-xml line-numbers-mode"><pre class="language-xml"><code>	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>delete</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>deleteMore<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
	delete from t_user where id in (${ids})
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>delete</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="mybatis动态设置表名"><a href="#mybatis动态设置表名" class="header-anchor">#</a> Mybatis动态设置表名</h2> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> <span class="token function">getAllUser</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;tableName&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span> tableName<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>getAllUser<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>User<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
	select * from ${tableName}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="添加功能获取自增的主键"><a href="#添加功能获取自增的主键" class="header-anchor">#</a> 添加功能获取自增的主键</h2> <p>t_class(class_id,class_name)</p> <p>t_student(student_id,student_name,class_id)</p> <p>1.添加班级信息</p> <p>2.获取新添加的班级id</p> <p>3.为班级分配学生，即将某学的班级id修改为新添加的班级id</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>	<span class="token comment">/**
     * 添加功能获取自增的主键
     */</span>
    <span class="token keyword">void</span> <span class="token function">insertUser</span><span class="token punctuation">(</span><span class="token class-name">User</span> user<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>useGeneratedKeys：设置当前标签中的sql使用了自增的主键</p> <p>keyProperty：将自增主键的值赋值给传输到映射文件中参数的某个属性</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>	<span class="token operator">&lt;</span>insert id<span class="token operator">=</span><span class="token string">&quot;insertUser&quot;</span> useGeneratedKeys<span class="token operator">=</span><span class="token string">&quot;true&quot;</span> keyProperty<span class="token operator">=</span><span class="token string">&quot;id&quot;</span><span class="token operator">&gt;</span>
        <span class="token constant">INSERT</span> into account values <span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span>#<span class="token punctuation">{</span>name<span class="token punctuation">}</span><span class="token punctuation">,</span>#<span class="token punctuation">{</span>money<span class="token punctuation">}</span><span class="token punctuation">,</span>#<span class="token punctuation">{</span>password<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>insert<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h1 id="自定义映射resultmap"><a href="#自定义映射resultmap" class="header-anchor">#</a> 自定义映射resultMap</h1> <h2 id="resultmap处理字段和属性的映射关系"><a href="#resultmap处理字段和属性的映射关系" class="header-anchor">#</a> resultMap处理字段和属性的映射关系</h2> <p>若字段名和实体类中的属性不一致，则可以通过resultMap设置自定义映射</p> <blockquote><p>解决字段名和属性名不一致的情况</p> <p>a&gt;字段起别名，保持和属性名一致</p> <p>b&gt;设置全局配置,将_自动映射为驼峰</p> <p>c&gt;resultMap</p></blockquote> <p>b方法:在mybatis-config.xml中</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>	<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>设置<span class="token class-name">Mybatis</span>的全局配置<span class="token operator">--</span><span class="token operator">&gt;</span>
    <span class="token generics"><span class="token punctuation">&lt;</span>settings<span class="token punctuation">&gt;</span></span>
        <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>将_自动映射为驼峰，emp_name <span class="token operator">=</span> empName        <span class="token operator">--</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>setting name<span class="token operator">=</span><span class="token string">&quot;mapUnderscoreToCamelCase&quot;</span> value<span class="token operator">=</span><span class="token string">&quot;true&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>settings<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>c方法：resultMap</p> <p>在Mapper.xml中</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>	<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>
    resultMap<span class="token operator">:</span>设置自定义映射关系
    id<span class="token operator">:</span>唯一标识<span class="token punctuation">,</span>不能重复
    type<span class="token operator">:</span>设置映射关系中的实体类类型
    子标签<span class="token operator">:</span>
    <span class="token generics"><span class="token punctuation">&lt;</span>id<span class="token punctuation">&gt;</span></span><span class="token operator">:</span>设置主键的映射关系
    <span class="token generics"><span class="token punctuation">&lt;</span>result<span class="token punctuation">&gt;</span></span><span class="token operator">:</span>设置普通字段的映射关系
    属性<span class="token operator">:</span>
    property<span class="token operator">:</span>设置映射关系中的属性名<span class="token punctuation">,</span>必须是type属性所设置的实体类类型的属性名
    column<span class="token operator">:</span>设置映射关系中的字段名<span class="token punctuation">,</span>必须是sql语句查询出的字段宁
    <span class="token operator">--</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>resultMap id<span class="token operator">=</span><span class="token string">&quot;empResultMap&quot;</span> type<span class="token operator">=</span><span class="token string">&quot;cn.lanqiao.pojo.Emp&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>id property<span class="token operator">=</span><span class="token string">&quot;eid&quot;</span> column<span class="token operator">=</span><span class="token string">&quot;eid&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>id<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>result property<span class="token operator">=</span><span class="token string">&quot;empName&quot;</span> column<span class="token operator">=</span><span class="token string">&quot;emp_name&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>result<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>result property<span class="token operator">=</span><span class="token string">&quot;age&quot;</span> column<span class="token operator">=</span><span class="token string">&quot;age&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>result<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>result property<span class="token operator">=</span><span class="token string">&quot;sex&quot;</span> column<span class="token operator">=</span><span class="token string">&quot;sex&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>result<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>result property<span class="token operator">=</span><span class="token string">&quot;email&quot;</span> column<span class="token operator">=</span><span class="token string">&quot;email&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>result<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>resultMap<span class="token operator">&gt;</span>
   
    <span class="token operator">&lt;</span>select id<span class="token operator">=</span><span class="token string">&quot;getAllEmp&quot;</span> resultMap<span class="token operator">=</span><span class="token string">&quot;empResultMap&quot;</span><span class="token operator">&gt;</span>
        <span class="token constant">SELECT</span> <span class="token operator">*</span> <span class="token class-name">FROM</span> t_emp<span class="token punctuation">;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>select<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><p><img alt="image-20230211214036991" data-src="https://gitee.com/try-to-be-better/cloud-images/raw/master/img/image-20230211214036991.png" loading="lazy" class="lazy"></p> <h1 id="处理多对一关系"><a href="#处理多对一关系" class="header-anchor">#</a> 处理多对一关系</h1> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 创建部门表</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> departments <span class="token punctuation">(</span>
                             department_id <span class="token keyword">INT</span> <span class="token keyword">AUTO_INCREMENT</span> <span class="token keyword">COMMENT</span> <span class="token string">'部门ID，自动增长'</span><span class="token punctuation">,</span>
                             name <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'部门名称'</span><span class="token punctuation">,</span>
                             location <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span> <span class="token keyword">COMMENT</span> <span class="token string">'部门所在地'</span><span class="token punctuation">,</span>
                             <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span>department_id<span class="token punctuation">)</span> <span class="token keyword">COMMENT</span> <span class="token string">'主键'</span>
<span class="token punctuation">)</span> <span class="token keyword">COMMENT</span><span class="token operator">=</span><span class="token string">'存储公司所有部门的信息'</span><span class="token punctuation">;</span>

<span class="token comment">-- 创建员工表</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> employees <span class="token punctuation">(</span>
                           employee_id <span class="token keyword">INT</span> <span class="token keyword">AUTO_INCREMENT</span> <span class="token keyword">COMMENT</span> <span class="token string">'员工ID，自动增长'</span><span class="token punctuation">,</span>
                           employee_name <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'员工名字'</span><span class="token punctuation">,</span>
                           position <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span> <span class="token keyword">COMMENT</span> <span class="token string">'职位'</span><span class="token punctuation">,</span>
                           hire_date <span class="token keyword">DATE</span> <span class="token keyword">COMMENT</span> <span class="token string">'入职日期'</span><span class="token punctuation">,</span>
                           department_id <span class="token keyword">INT</span> <span class="token keyword">COMMENT</span> <span class="token string">'所属部门ID'</span><span class="token punctuation">,</span>
                           <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span>employee_id<span class="token punctuation">)</span> <span class="token keyword">COMMENT</span> <span class="token string">'主键'</span>
<span class="token punctuation">)</span> <span class="token keyword">COMMENT</span><span class="token operator">=</span><span class="token string">'存储公司所有员工的信息'</span><span class="token punctuation">;</span>
<span class="token operator">=</span>
<span class="token comment">-- 插入部门数据</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> departments <span class="token punctuation">(</span>name<span class="token punctuation">,</span> location<span class="token punctuation">)</span> <span class="token keyword">VALUES</span>
<span class="token punctuation">(</span><span class="token string">'人力资源部'</span><span class="token punctuation">,</span> <span class="token string">'北京'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token string">'财务部'</span><span class="token punctuation">,</span> <span class="token string">'上海'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token string">'技术部'</span><span class="token punctuation">,</span> <span class="token string">'深圳'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token string">'市场部'</span><span class="token punctuation">,</span> <span class="token string">'广州'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 插入员工数据</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> employees <span class="token punctuation">(</span>employee_name<span class="token punctuation">,</span> position<span class="token punctuation">,</span> hire_date<span class="token punctuation">,</span> department_id<span class="token punctuation">)</span> <span class="token keyword">VALUES</span>
<span class="token punctuation">(</span><span class="token string">'张三'</span><span class="token punctuation">,</span> <span class="token string">'人事专员'</span><span class="token punctuation">,</span> <span class="token string">'2023-01-15'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token string">'李四'</span><span class="token punctuation">,</span> <span class="token string">'会计'</span><span class="token punctuation">,</span> <span class="token string">'2023-02-20'</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token string">'王五'</span><span class="token punctuation">,</span> <span class="token string">'软件工程师'</span><span class="token punctuation">,</span> <span class="token string">'2023-03-10'</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token string">'赵六'</span><span class="token punctuation">,</span> <span class="token string">'市场经理'</span><span class="token punctuation">,</span> <span class="token string">'2023-04-05'</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token string">'孙七'</span><span class="token punctuation">,</span> <span class="token string">'招聘专员'</span><span class="token punctuation">,</span> <span class="token string">'2023-05-01'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token string">'周八'</span><span class="token punctuation">,</span> <span class="token string">'财务分析师'</span><span class="token punctuation">,</span> <span class="token string">'2023-06-15'</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token string">'吴九'</span><span class="token punctuation">,</span> <span class="token string">'前端开发'</span><span class="token punctuation">,</span> <span class="token string">'2023-07-20'</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token string">'郑十'</span><span class="token punctuation">,</span> <span class="token string">'市场助理'</span><span class="token punctuation">,</span> <span class="token string">'2023-08-05'</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br></div></div><h2 id="第一种-处理多对一的映射关系"><a href="#第一种-处理多对一的映射关系" class="header-anchor">#</a> 第一种:处理多对一的映射关系</h2> <h3 id="通过级联属性赋值解决多对一的映射关系"><a href="#通过级联属性赋值解决多对一的映射关系" class="header-anchor">#</a> 通过级联属性赋值解决多对一的映射关系</h3> <p>查询员工以及员工对应的部门信息</p> <p>emp.java</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>	<span class="token keyword">private</span> <span class="token class-name">Integer</span> eid<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> empName<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> age<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> sex<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> email<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Dept</span> dept<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>dept.java</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>	<span class="token keyword">private</span> <span class="token class-name">Integer</span> did<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> deptName<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>EmpMapper</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">Emp</span> <span class="token function">getEmpAndDept</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;eid&quot;</span><span class="token punctuation">)</span> <span class="token class-name">Integer</span> eid<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>EmpMapper.xml</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>	<span class="token operator">&lt;</span>resultMap id<span class="token operator">=</span><span class="token string">&quot;empAndDeptGetAll&quot;</span> type<span class="token operator">=</span><span class="token string">&quot;cn.lanqiao.pojo.Emp&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>id property<span class="token operator">=</span><span class="token string">&quot;eid&quot;</span> column<span class="token operator">=</span><span class="token string">&quot;eid&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>id<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>result property<span class="token operator">=</span><span class="token string">&quot;empName&quot;</span> column<span class="token operator">=</span><span class="token string">&quot;emp_name&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>result<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>result property<span class="token operator">=</span><span class="token string">&quot;age&quot;</span> column<span class="token operator">=</span><span class="token string">&quot;age&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>result<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>result property<span class="token operator">=</span><span class="token string">&quot;sex&quot;</span> column<span class="token operator">=</span><span class="token string">&quot;sex&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>result<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>result property<span class="token operator">=</span><span class="token string">&quot;email&quot;</span> column<span class="token operator">=</span><span class="token string">&quot;email&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>result<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>result property<span class="token operator">=</span><span class="token string">&quot;dept.did&quot;</span> column<span class="token operator">=</span><span class="token string">&quot;did&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>result<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>result property<span class="token operator">=</span><span class="token string">&quot;dept.deptName&quot;</span> column<span class="token operator">=</span><span class="token string">&quot;dept_name&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>result<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>resultMap<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>select id<span class="token operator">=</span><span class="token string">&quot;getEmpAndDept&quot;</span> resultMap<span class="token operator">=</span><span class="token string">&quot;empAndDeptGetAll&quot;</span><span class="token operator">&gt;</span>
        <span class="token constant">SELECT</span> <span class="token operator">*</span> <span class="token constant">FROM</span> t_emp left join t_dept on t_emp<span class="token punctuation">.</span>did <span class="token operator">=</span> t_dept<span class="token punctuation">.</span>did where t_emp<span class="token punctuation">.</span>eid <span class="token operator">=</span> #<span class="token punctuation">{</span>eid<span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>select<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h2 id="第二种-处理多对一的映射关系"><a href="#第二种-处理多对一的映射关系" class="header-anchor">#</a> 第二种:处理多对一的映射关系</h2> <h3 id="通过association解决多对一的映射关系-常用"><a href="#通过association解决多对一的映射关系-常用" class="header-anchor">#</a> 通过association解决多对一的映射关系(常用)</h3> <div class="language-java line-numbers-mode"><pre class="language-java"><code>	<span class="token operator">&lt;</span>resultMap id<span class="token operator">=</span><span class="token string">&quot;empAndDeptGetAlltwo&quot;</span> type<span class="token operator">=</span><span class="token string">&quot;cn.lanqiao.pojo.Emp&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>id property<span class="token operator">=</span><span class="token string">&quot;eid&quot;</span> column<span class="token operator">=</span><span class="token string">&quot;eid&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>id<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>result property<span class="token operator">=</span><span class="token string">&quot;empName&quot;</span> column<span class="token operator">=</span><span class="token string">&quot;emp_name&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>result<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>result property<span class="token operator">=</span><span class="token string">&quot;age&quot;</span> column<span class="token operator">=</span><span class="token string">&quot;age&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>result<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>result property<span class="token operator">=</span><span class="token string">&quot;sex&quot;</span> column<span class="token operator">=</span><span class="token string">&quot;sex&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>result<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>result property<span class="token operator">=</span><span class="token string">&quot;email&quot;</span> column<span class="token operator">=</span><span class="token string">&quot;email&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>result<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>
        association<span class="token operator">:</span>处理多对一的映射关系
        property<span class="token operator">:</span>需要处理多对一的映射关系的属性名
        javaType<span class="token operator">:</span>该属性的类型
        <span class="token operator">--</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>association property<span class="token operator">=</span><span class="token string">&quot;dept&quot;</span> javaType<span class="token operator">=</span><span class="token string">&quot;cn.lanqiao.pojo.Dept&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>id property<span class="token operator">=</span><span class="token string">&quot;did&quot;</span> column<span class="token operator">=</span><span class="token string">&quot;did&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>id<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>result property<span class="token operator">=</span><span class="token string">&quot;deptName&quot;</span> column<span class="token operator">=</span><span class="token string">&quot;dept_name&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>result<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>association<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>resultMap<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h2 id="第三种-处理多对一的映射关系"><a href="#第三种-处理多对一的映射关系" class="header-anchor">#</a> 第三种:处理多对一的映射关系</h2> <h3 id="分步查询"><a href="#分步查询" class="header-anchor">#</a> 分步查询</h3> <p>第一步：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>	<span class="token comment">/**
     * 通过分布查询查询员工以及员工所对应的部门信息
     * 分布查询第一步:查询员工信息
     */</span>
    <span class="token class-name">Emp</span> <span class="token function">getEmpAndDeptByStepOne</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;eid&quot;</span><span class="token punctuation">)</span> <span class="token class-name">Integer</span> eid<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="language-java line-numbers-mode"><pre class="language-java"><code>    <span class="token operator">&lt;</span>resultMap id<span class="token operator">=</span><span class="token string">&quot;empAndDeptGetAllthree&quot;</span> type<span class="token operator">=</span><span class="token string">&quot;cn.lanqiao.pojo.Emp&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>id property<span class="token operator">=</span><span class="token string">&quot;eid&quot;</span> column<span class="token operator">=</span><span class="token string">&quot;eid&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>id<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>result property<span class="token operator">=</span><span class="token string">&quot;empName&quot;</span> column<span class="token operator">=</span><span class="token string">&quot;emp_name&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>result<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>result property<span class="token operator">=</span><span class="token string">&quot;age&quot;</span> column<span class="token operator">=</span><span class="token string">&quot;age&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>result<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>result property<span class="token operator">=</span><span class="token string">&quot;sex&quot;</span> column<span class="token operator">=</span><span class="token string">&quot;sex&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>result<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>result property<span class="token operator">=</span><span class="token string">&quot;email&quot;</span> column<span class="token operator">=</span><span class="token string">&quot;email&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>result<span class="token operator">&gt;</span>

        <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>
        association<span class="token operator">:</span>处理多对一的映射关系
        select<span class="token operator">:</span>设置分布查询<span class="token constant">SQL</span>的唯一标识<span class="token punctuation">(</span><span class="token class-name"><span class="token namespace">namespace<span class="token punctuation">.</span></span>SQLid</span>或者mapper接口的全类名<span class="token punctuation">.</span>方法名<span class="token punctuation">)</span>
        column<span class="token operator">:</span>设置分布查询的条件
        <span class="token operator">--</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>association property<span class="token operator">=</span><span class="token string">&quot;dept&quot;</span> select<span class="token operator">=</span><span class="token string">&quot;cn.lanqiao.mapper.DeptMapper.getEmpAndDeptByStepTwo&quot;</span> column<span class="token operator">=</span><span class="token string">&quot;did&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>association<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>resultMap<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>select id<span class="token operator">=</span><span class="token string">&quot;getEmpAndDeptByStepOne&quot;</span> resultMap<span class="token operator">=</span><span class="token string">&quot;empAndDeptGetAllthree&quot;</span><span class="token operator">&gt;</span>
        <span class="token constant">SELECT</span> <span class="token operator">*</span> <span class="token constant">FROM</span> t_emp where eid <span class="token operator">=</span> #<span class="token punctuation">{</span>eid<span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>select<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>第二步：通过did查询员工所在部门</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>	<span class="token comment">/**
     * 通过分布查询查询员工以及员工所对应的部门信息
     * 分布查询第一步:查询员工信息
     * 分布查询第二步:通过did查询员工所在部门
     */</span>
    <span class="token class-name">Dept</span> <span class="token function">getEmpAndDeptByStepTwo</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;did&quot;</span><span class="token punctuation">)</span> <span class="token class-name">Integer</span> did<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="language-java line-numbers-mode"><pre class="language-java"><code>	<span class="token operator">&lt;</span>resultMap id<span class="token operator">=</span><span class="token string">&quot;DeptGet&quot;</span> type<span class="token operator">=</span><span class="token string">&quot;cn.lanqiao.pojo.Dept&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>id property<span class="token operator">=</span><span class="token string">&quot;did&quot;</span> column<span class="token operator">=</span><span class="token string">&quot;did&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>id<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>result property<span class="token operator">=</span><span class="token string">&quot;deptName&quot;</span> column<span class="token operator">=</span><span class="token string">&quot;dept_name&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>result<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>resultMap<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>select id<span class="token operator">=</span><span class="token string">&quot;getEmpAndDeptByStepTwo&quot;</span> resultMap<span class="token operator">=</span><span class="token string">&quot;DeptGet&quot;</span><span class="token operator">&gt;</span>
        <span class="token constant">SELECT</span> <span class="token operator">*</span> <span class="token constant">FROM</span> t_dept where did <span class="token operator">=</span> #<span class="token punctuation">{</span>did<span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>select<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>测试:</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>	<span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">getEmpAndDeptThree</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token class-name">InputStream</span> is <span class="token operator">=</span> <span class="token class-name">Resources</span><span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span><span class="token string">&quot;mybatis-config.xml&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">SqlSessionFactoryBuilder</span> sqlSessionFactoryBuilder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SqlSessionFactoryBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">SqlSessionFactory</span> sqlSessionFactory <span class="token operator">=</span> sqlSessionFactoryBuilder<span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span>is<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">SqlSession</span> sqlSession <span class="token operator">=</span> sqlSessionFactory<span class="token punctuation">.</span><span class="token function">openSession</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">EmpMapper</span> mapper <span class="token operator">=</span> sqlSession<span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">EmpMapper</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Emp</span> empAndDeptByStepOne <span class="token operator">=</span> mapper<span class="token punctuation">.</span><span class="token function">getEmpAndDeptByStepOne</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>empAndDeptByStepOne<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h2 id="延迟加载"><a href="#延迟加载" class="header-anchor">#</a> 延迟加载</h2> <blockquote><p>分步查询的优点：可以实现延迟加载，但是必须在核心配置文件中设置全局配置信息</p> <p>lazyLoadingEnable；延迟加载的全局开关。当开启时，所有关联对象都会延迟加载</p> <p>aggressiveLazyLoading:当开启时，任何方法的调用都会加载该对象的所有属性，否则，每个属性都会按需加载</p> <p>此时就可以实现按需加载，获取的数据是什么，就只会执行相应的sql。此时可以通过association和collection中的fetchType属性设置当前的分布查询是否使用延迟加载,fetchType= &quot;lazy(延迟加载)|eager(立即加载)&quot;</p></blockquote> <h3 id="开启延迟加载"><a href="#开启延迟加载" class="header-anchor">#</a> 开启延迟加载</h3> <p>在mybatis-config.xml中</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>	<span class="token generics"><span class="token punctuation">&lt;</span>settings<span class="token punctuation">&gt;</span></span>
        <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>    开启延迟加载<span class="token operator">--</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>setting name<span class="token operator">=</span><span class="token string">&quot;lazyLoadingEnabled&quot;</span> value<span class="token operator">=</span><span class="token string">&quot;true&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>settings<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>Mapper.xml中</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>		<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>
        association<span class="token operator">:</span>处理多对一的映射关系
        select<span class="token operator">:</span>设置分布查询<span class="token constant">SQL</span>的唯一标识<span class="token punctuation">(</span><span class="token class-name"><span class="token namespace">namespace<span class="token punctuation">.</span></span>SQLid</span>或者mapper接口的全类名<span class="token punctuation">.</span>方法名<span class="token punctuation">)</span>
        column<span class="token operator">:</span>设置分布查询的条件
        fetchType<span class="token operator">:</span>当开启了全局的延迟加载之后，可通过此属性手动控制延迟加载的效果
        fetchType<span class="token operator">:</span><span class="token string">&quot;lazy|eager&quot;</span> lazy<span class="token operator">:</span>表示延迟加载<span class="token punctuation">,</span>eager表示立即加载
        <span class="token operator">--</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>association
                property<span class="token operator">=</span><span class="token string">&quot;dept&quot;</span>
                select<span class="token operator">=</span><span class="token string">&quot;cn.lanqiao.mapper.DeptMapper.getEmpAndDeptByStepTwo&quot;</span>
                column<span class="token operator">=</span><span class="token string">&quot;did&quot;</span>
                fetchType<span class="token operator">=</span><span class="token string">&quot;eager&quot;</span>
        <span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>association<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h1 id="处理一对多的映射关系"><a href="#处理一对多的映射关系" class="header-anchor">#</a> 处理一对多的映射关系</h1> <h2 id="通过collection解决一对多的映射关系"><a href="#通过collection解决一对多的映射关系" class="header-anchor">#</a> 通过collection解决一对多的映射关系</h2> <h3 id="获取部门以及部门中所有的员工信息"><a href="#获取部门以及部门中所有的员工信息" class="header-anchor">#</a> 获取部门以及部门中所有的员工信息</h3> <div class="language-java line-numbers-mode"><pre class="language-java"><code>	<span class="token keyword">private</span> <span class="token class-name">Integer</span> did<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> deptName<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Emp</span><span class="token punctuation">&gt;</span></span> emps<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="language-java line-numbers-mode"><pre class="language-java"><code>	<span class="token comment">/**
     *获取部门以及部门中的员工信息
     *
     */</span>
    <span class="token class-name">Dept</span> <span class="token function">getDeptAndEmp</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;did&quot;</span><span class="token punctuation">)</span> <span class="token class-name">Integer</span> did<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="language-java line-numbers-mode"><pre class="language-java"><code>	<span class="token operator">&lt;</span>resultMap id<span class="token operator">=</span><span class="token string">&quot;getDeptAndResultMap&quot;</span> type<span class="token operator">=</span><span class="token string">&quot;cn.lanqiao.pojo.Dept&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>id property<span class="token operator">=</span><span class="token string">&quot;did&quot;</span> column<span class="token operator">=</span><span class="token string">&quot;did&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>id<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>result property<span class="token operator">=</span><span class="token string">&quot;deptName&quot;</span> column<span class="token operator">=</span><span class="token string">&quot;dept_name&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>result<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>
        collection<span class="token operator">:</span>处理一对多的映射关系
        ofType<span class="token operator">:</span>表示该属性所对应的集合中存储数据的类型
        <span class="token operator">--</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>collection property<span class="token operator">=</span><span class="token string">&quot;emps&quot;</span> ofType<span class="token operator">=</span><span class="token string">&quot;cn.lanqiao.pojo.Emp&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>id property<span class="token operator">=</span><span class="token string">&quot;eid&quot;</span> column<span class="token operator">=</span><span class="token string">&quot;eid&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>id<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>result property<span class="token operator">=</span><span class="token string">&quot;empName&quot;</span> column<span class="token operator">=</span><span class="token string">&quot;emp_name&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>result<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>result property<span class="token operator">=</span><span class="token string">&quot;age&quot;</span> column<span class="token operator">=</span><span class="token string">&quot;age&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>result<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>result property<span class="token operator">=</span><span class="token string">&quot;sex&quot;</span> column<span class="token operator">=</span><span class="token string">&quot;sex&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>result<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>result property<span class="token operator">=</span><span class="token string">&quot;email&quot;</span> column<span class="token operator">=</span><span class="token string">&quot;email&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>result<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>collection<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>resultMap<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>select id<span class="token operator">=</span><span class="token string">&quot;getDeptAndEmp&quot;</span> resultMap<span class="token operator">=</span><span class="token string">&quot;getDeptAndResultMap&quot;</span><span class="token operator">&gt;</span>
        <span class="token constant">SELECT</span> <span class="token operator">*</span> <span class="token constant">FROM</span> t_dept left join t_emp on t_dept<span class="token punctuation">.</span>did <span class="token operator">=</span> t_emp<span class="token punctuation">.</span>did where t_dept<span class="token punctuation">.</span>did <span class="token operator">=</span> #<span class="token punctuation">{</span>did<span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>select<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h2 id="通过分步查询解决一对多的映射关系"><a href="#通过分步查询解决一对多的映射关系" class="header-anchor">#</a> 通过分步查询解决一对多的映射关系</h2> <h3 id="通过分步查询查询部门以及部门中所有的员工信息"><a href="#通过分步查询查询部门以及部门中所有的员工信息" class="header-anchor">#</a> 通过分步查询查询部门以及部门中所有的员工信息</h3> <div class="language-java line-numbers-mode"><pre class="language-java"><code>	<span class="token comment">/**
     * 通过分布查询查询部门以及部门中所有的员工信息
     * 分布查询第一步:先根据id查询部门
     *
     */</span>
    <span class="token class-name">Dept</span> <span class="token function">getDeptAndEmpStepOne</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;did&quot;</span><span class="token punctuation">)</span> <span class="token class-name">Integer</span> did<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="language-java line-numbers-mode"><pre class="language-java"><code>	<span class="token comment">/**
     * 通过分布查询查询部门以及部门中所有的员工信息
     * 分布查询第一步:先根据id查询部门
     * 分布查询第二步:根据did查询该部门所有员工信息
     */</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Emp</span><span class="token punctuation">&gt;</span></span> <span class="token function">getDeptAndEmpByStepTwo</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;did&quot;</span><span class="token punctuation">)</span> <span class="token class-name">Integer</span> did<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="language-java line-numbers-mode"><pre class="language-java"><code>	<span class="token operator">&lt;</span>select id<span class="token operator">=</span><span class="token string">&quot;getDeptAndEmpByStepTwo&quot;</span> resultType<span class="token operator">=</span><span class="token string">&quot;cn.lanqiao.pojo.Emp&quot;</span><span class="token operator">&gt;</span>
        <span class="token constant">SELECT</span> <span class="token operator">*</span> <span class="token constant">FROM</span> t_emp where did <span class="token operator">=</span> #<span class="token punctuation">{</span>did<span class="token punctuation">}</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>select<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="language-java line-numbers-mode"><pre class="language-java"><code>	<span class="token operator">&lt;</span>resultMap id<span class="token operator">=</span><span class="token string">&quot;getDeptAndEmpStepResultMap&quot;</span> type<span class="token operator">=</span><span class="token string">&quot;cn.lanqiao.pojo.Dept&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>id property<span class="token operator">=</span><span class="token string">&quot;did&quot;</span> column<span class="token operator">=</span><span class="token string">&quot;did&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>id<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>result property<span class="token operator">=</span><span class="token string">&quot;deptName&quot;</span> column<span class="token operator">=</span><span class="token string">&quot;dept_name&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>result<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>collection property<span class="token operator">=</span><span class="token string">&quot;emps&quot;</span>
                    select<span class="token operator">=</span><span class="token string">&quot;cn.lanqiao.mapper.EmpMapper.getDeptAndEmpByStepTwo&quot;</span>
                    column<span class="token operator">=</span><span class="token string">&quot;did&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>collection<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>resultMap<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>select id<span class="token operator">=</span><span class="token string">&quot;getDeptAndEmpStepOne&quot;</span> resultMap<span class="token operator">=</span><span class="token string">&quot;getDeptAndEmpStepResultMap&quot;</span><span class="token operator">&gt;</span>
        <span class="token constant">SELECT</span> <span class="token operator">*</span> <span class="token constant">FROM</span> t_dept where did <span class="token operator">=</span> #<span class="token punctuation">{</span>did<span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>select<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h1 id="动态sql"><a href="#动态sql" class="header-anchor">#</a> 动态SQL</h1> <h2 id="回顾"><a href="#回顾" class="header-anchor">#</a> 回顾</h2> <p>(1)collection和association标签是用来干嘛的</p> <h2 id="初始动态sql"><a href="#初始动态sql" class="header-anchor">#</a> 初始动态SQL</h2> <p>Mybatis框架的动态SQL技术是一种根据特定条件动态拼装SQL语句的功能，它存在的意义是为了解决拼接SQL语句字符串时的痛点问题。</p> <h2 id="if标签-常用"><a href="#if标签-常用" class="header-anchor">#</a> if标签(常用)</h2> <p>可以根据标签中test属性所对应的表达式决定标签中的内容是否需要拼接到SQL中</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>	<span class="token comment">/**
     * 多条件查询
     */</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Emp</span><span class="token punctuation">&gt;</span></span> <span class="token function">getEmpByCondition</span><span class="token punctuation">(</span><span class="token class-name">Emp</span> emp<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language-java line-numbers-mode"><pre class="language-java"><code>	<span class="token operator">&lt;</span>select id<span class="token operator">=</span><span class="token string">&quot;getEmpByCondition&quot;</span> resultType<span class="token operator">=</span><span class="token string">&quot;cn.lanqiao.pojo.Emp&quot;</span><span class="token operator">&gt;</span>
        <span class="token constant">SELECT</span> <span class="token operator">*</span> <span class="token constant">FROM</span> t_emp where <span class="token number">1</span><span class="token operator">=</span><span class="token number">1</span>
        <span class="token operator">&lt;</span><span class="token keyword">if</span> test<span class="token operator">=</span><span class="token string">&quot;empName !=null and empName !=''&quot;</span><span class="token operator">&gt;</span>
            emp_name <span class="token operator">=</span> #<span class="token punctuation">{</span>empName<span class="token punctuation">}</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token keyword">if</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token keyword">if</span> test<span class="token operator">=</span><span class="token string">&quot;age !=null and age !=''&quot;</span><span class="token operator">&gt;</span>
            <span class="token class-name">And</span> age <span class="token operator">=</span> #<span class="token punctuation">{</span>age<span class="token punctuation">}</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token keyword">if</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token keyword">if</span> test<span class="token operator">=</span><span class="token string">&quot;sex !=null and sex !=''&quot;</span><span class="token operator">&gt;</span>
            <span class="token class-name">And</span>  sex <span class="token operator">=</span> #<span class="token punctuation">{</span>sex<span class="token punctuation">}</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token keyword">if</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token keyword">if</span> test<span class="token operator">=</span><span class="token string">&quot;email !=null and email !=''&quot;</span><span class="token operator">&gt;</span>
            <span class="token class-name">And</span>  email <span class="token operator">=</span> #<span class="token punctuation">{</span>email<span class="token punctuation">}</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token keyword">if</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>select<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>测试类</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestMybatis</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token comment">//读取MyBatis的核心配置文件</span>
        <span class="token class-name">InputStream</span> is <span class="token operator">=</span> <span class="token class-name">Resources</span><span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span><span class="token string">&quot;mybatis-config.xml&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//获取SqlSessionFactoryBuilder对象</span>
        <span class="token class-name">SqlSessionFactoryBuilder</span> sqlSessionFactoryBuilder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SqlSessionFactoryBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//通过核心配置文件所对应的字节输入流创建工厂类SqlSessionFactory，生产SqlSession对象</span>
        <span class="token class-name">SqlSessionFactory</span> sqlSessionFactory <span class="token operator">=</span> sqlSessionFactoryBuilder<span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span>is<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//获取sqlSession，此时通过SqlSession对象所操作的sql都必须手动提交或回滚事务</span>
        <span class="token comment">//SqlSession sqlSession = sqlSessionFactory.openSession();</span>
        <span class="token comment">//创建SqlSession对象，此时通过SqlSession对象所操作的sql都会自动提交</span>
        <span class="token class-name">SqlSession</span> sqlSession <span class="token operator">=</span> sqlSessionFactory<span class="token punctuation">.</span><span class="token function">openSession</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//通过代理模式创建UserMapper接口的代理实现类对象</span>
        <span class="token class-name">DynamicMapper</span> mapper <span class="token operator">=</span> sqlSession<span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">DynamicMapper</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Emp</span><span class="token punctuation">&gt;</span></span> empByCondition <span class="token operator">=</span> mapper<span class="token punctuation">.</span><span class="token function">getEmpByCondition</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Emp</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token number">23</span><span class="token punctuation">,</span> <span class="token string">&quot;男&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;123@qq.com&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>empByCondition<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h2 id="where标签-常用"><a href="#where标签-常用" class="header-anchor">#</a> where标签(常用)</h2> <p>当where标签中有内容时，会自动生成where关键字，并且将内容前多余的and或者or去掉</p> <p>当where标签中没有内容时，此时where标签没有任何效果</p> <p><strong>注意：where标签不能将其中内容后面多余的and或者or去掉</strong></p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>	<span class="token operator">&lt;</span>select id<span class="token operator">=</span><span class="token string">&quot;getEmpByCondition&quot;</span> resultType<span class="token operator">=</span><span class="token string">&quot;cn.lanqiao.pojo.Emp&quot;</span><span class="token operator">&gt;</span>
        <span class="token constant">SELECT</span> <span class="token operator">*</span> <span class="token constant">FROM</span> t_emp 
        <span class="token generics"><span class="token punctuation">&lt;</span>where<span class="token punctuation">&gt;</span></span>
        <span class="token operator">&lt;</span><span class="token keyword">if</span> test<span class="token operator">=</span><span class="token string">&quot;empName !=null and empName !=''&quot;</span><span class="token operator">&gt;</span>
            emp_name <span class="token operator">=</span> #<span class="token punctuation">{</span>empName<span class="token punctuation">}</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token keyword">if</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token keyword">if</span> test<span class="token operator">=</span><span class="token string">&quot;age !=null and age !=''&quot;</span><span class="token operator">&gt;</span>
            <span class="token class-name">And</span> age <span class="token operator">=</span> #<span class="token punctuation">{</span>age<span class="token punctuation">}</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token keyword">if</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token keyword">if</span> test<span class="token operator">=</span><span class="token string">&quot;sex !=null and sex !=''&quot;</span><span class="token operator">&gt;</span>
            <span class="token class-name">And</span>  sex <span class="token operator">=</span> #<span class="token punctuation">{</span>sex<span class="token punctuation">}</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token keyword">if</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token keyword">if</span> test<span class="token operator">=</span><span class="token string">&quot;email !=null and email !=''&quot;</span><span class="token operator">&gt;</span>
            <span class="token class-name">And</span>  email <span class="token operator">=</span> #<span class="token punctuation">{</span>email<span class="token punctuation">}</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token keyword">if</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>where<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>select<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h2 id="choose、when、otherwise"><a href="#choose、when、otherwise" class="header-anchor">#</a> choose、when、otherwise</h2> <p>相当于if...else if...else</p> <p>when至少要有一个,otherwise最多只能由一个</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>	<span class="token comment">/**
     * 测试choose、when、otherwise
     */</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Emp</span><span class="token punctuation">&gt;</span></span> <span class="token function">getEmpByChoose</span><span class="token punctuation">(</span><span class="token class-name">Emp</span> emp<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language-java line-numbers-mode"><pre class="language-java"><code>	<span class="token operator">&lt;</span>select id<span class="token operator">=</span><span class="token string">&quot;getEmpByChoose&quot;</span> resultType<span class="token operator">=</span><span class="token string">&quot;cn.lanqiao.pojo.Emp&quot;</span><span class="token operator">&gt;</span>
        <span class="token constant">SELECT</span> <span class="token operator">*</span> <span class="token constant">FROM</span> t_emp
        <span class="token generics"><span class="token punctuation">&lt;</span>where<span class="token punctuation">&gt;</span></span>
            <span class="token generics"><span class="token punctuation">&lt;</span>choose<span class="token punctuation">&gt;</span></span>
                <span class="token operator">&lt;</span>when test<span class="token operator">=</span><span class="token string">&quot;empName !=null and empName != ''&quot;</span><span class="token operator">&gt;</span>
                    emp_name <span class="token operator">=</span> #<span class="token punctuation">{</span>empName<span class="token punctuation">}</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>when<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>when test<span class="token operator">=</span><span class="token string">&quot;age !=null and age != ''&quot;</span><span class="token operator">&gt;</span>
                    age <span class="token operator">=</span> #<span class="token punctuation">{</span>age<span class="token punctuation">}</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>when<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>when test<span class="token operator">=</span><span class="token string">&quot;sex !=null and sex != ''&quot;</span><span class="token operator">&gt;</span>
                    sex <span class="token operator">=</span> #<span class="token punctuation">{</span>sex<span class="token punctuation">}</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>when<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>when test<span class="token operator">=</span><span class="token string">&quot;email !=null and email != ''&quot;</span><span class="token operator">&gt;</span>
                    email <span class="token operator">=</span> #<span class="token punctuation">{</span>email<span class="token punctuation">}</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>when<span class="token operator">&gt;</span>
                <span class="token generics"><span class="token punctuation">&lt;</span>otherwise<span class="token punctuation">&gt;</span></span>
                    did <span class="token operator">=</span> <span class="token number">1</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>otherwise<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>choose<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>where<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>select<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><div class="language-java line-numbers-mode"><pre class="language-java"><code>	<span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">getEmpByChoose</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token class-name">InputStream</span> is <span class="token operator">=</span> <span class="token class-name">Resources</span><span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span><span class="token string">&quot;mybatis-config.xml&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">SqlSessionFactoryBuilder</span> sqlSessionFactoryBuilder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SqlSessionFactoryBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">SqlSessionFactory</span> sqlSessionFactory <span class="token operator">=</span> sqlSessionFactoryBuilder<span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span>is<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">SqlSession</span> sqlSession <span class="token operator">=</span> sqlSessionFactory<span class="token punctuation">.</span><span class="token function">openSession</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">DynamicSQLMapper</span> mapper <span class="token operator">=</span> sqlSession<span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">DynamicSQLMapper</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Emp</span><span class="token punctuation">&gt;</span></span> empByCondition <span class="token operator">=</span> mapper<span class="token punctuation">.</span><span class="token function">getEmpByChoose</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Emp</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span><span class="token string">&quot;李某人&quot;</span><span class="token punctuation">,</span><span class="token number">18</span><span class="token punctuation">,</span><span class="token string">&quot;男&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;1123377679@qq.com&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>empByCondition<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h2 id="foreach-常用"><a href="#foreach-常用" class="header-anchor">#</a> foreach(常用)</h2> <p>collection:设置需要循环的数组集合</p> <p>item:表示数组或集合中的每一个数据</p> <p>open:foreach标签所循环的所有内容的开始符</p> <p>close:foreach标签所循环的所有内容的结束符</p> <h3 id="批量删除"><a href="#批量删除" class="header-anchor">#</a> 批量删除</h3> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">/**
 * 批量删除
 */</span>
<span class="token keyword">int</span> <span class="token function">deleteMoreByArray</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;arr&quot;</span><span class="token punctuation">)</span> <span class="token class-name">Integer</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>delete</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>deleteMoreByArray<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    DELETE FROM t_emp WHERE eid in(
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>foreach</span> <span class="token attr-name">collection</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>arr<span class="token punctuation">&quot;</span></span> <span class="token attr-name">item</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>eid<span class="token punctuation">&quot;</span></span> <span class="token attr-name">separator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>,<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            #{eid}
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>foreach</span><span class="token punctuation">&gt;</span></span>
        )
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>delete</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="批量添加"><a href="#批量添加" class="header-anchor">#</a> 批量添加</h3> <div class="language-java line-numbers-mode"><pre class="language-java"><code>	<span class="token comment">/**
     * 批量添加
     */</span>
    <span class="token keyword">int</span> <span class="token function">insertMoreByList</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;emps&quot;</span><span class="token punctuation">)</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Emp</span><span class="token punctuation">&gt;</span></span> emps<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>insert</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>insertMoreByList<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    insert into t_emp values
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>foreach</span> <span class="token attr-name">collection</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>emps<span class="token punctuation">&quot;</span></span> <span class="token attr-name">item</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>emp<span class="token punctuation">&quot;</span></span> <span class="token attr-name">separator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>,<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        (null,#{emp.empName},#{emp.age},#{emp.sex},#{emp.email},null)
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>foreach</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>insert</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">insertMoreByList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
    <span class="token class-name">InputStream</span> is <span class="token operator">=</span> <span class="token class-name">Resources</span><span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span><span class="token string">&quot;mybatis-config.xml&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">SqlSessionFactoryBuilder</span> sqlSessionFactoryBuilder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SqlSessionFactoryBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">SqlSessionFactory</span> sqlSessionFactory <span class="token operator">=</span> sqlSessionFactoryBuilder<span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span>is<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">SqlSession</span> sqlSession <span class="token operator">=</span> sqlSessionFactory<span class="token punctuation">.</span><span class="token function">openSession</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">DynamicSQLMapper</span> mapper <span class="token operator">=</span> sqlSession<span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">DynamicSQLMapper</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Emp</span> e1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Emp</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span><span class="token string">&quot;a1&quot;</span><span class="token punctuation">,</span><span class="token number">18</span><span class="token punctuation">,</span><span class="token string">&quot;男&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;1123377679@qq.com&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Emp</span> e2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Emp</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span><span class="token string">&quot;a2&quot;</span><span class="token punctuation">,</span><span class="token number">18</span><span class="token punctuation">,</span><span class="token string">&quot;男&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;1123377679@qq.com&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Emp</span> e3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Emp</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span><span class="token string">&quot;a3&quot;</span><span class="token punctuation">,</span><span class="token number">18</span><span class="token punctuation">,</span><span class="token string">&quot;男&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;1123377679@qq.com&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Emp</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span>e1<span class="token punctuation">,</span> e2<span class="token punctuation">,</span> e3<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> i <span class="token operator">=</span> mapper<span class="token punctuation">.</span><span class="token function">insertMoreByList</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h2 id="sql标签-sql片段"><a href="#sql标签-sql片段" class="header-anchor">#</a> SQL标签(SQL片段)</h2> <p>将常用的SQL片段记录下来，方便调用</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>sql</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>empCloums<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>eid,emp_name,age,sex,email<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>sql</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>getEmpByCondition<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultMap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>getEmpByConditionMap<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    SELECT <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>include</span> <span class="token attr-name">refid</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>empCloums<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>include</span><span class="token punctuation">&gt;</span></span>  FROM t_emp where
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>empName !=null and empName !=''<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        emp_name = #{empName}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>age !=null and age !=''<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        And age = #{age}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sex !=null and sex !=''<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        And  sex = #{sex}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>email !=null and email !=''<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        And  email = #{email}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h1 id="mybatis的缓存"><a href="#mybatis的缓存" class="header-anchor">#</a> Mybatis的缓存</h1> <p>缓存只针对于查询功能</p> <h2 id="mybtais一级缓存"><a href="#mybtais一级缓存" class="header-anchor">#</a> Mybtais一级缓存</h2> <p>一级缓存是SqlSession级别的，通过同一个SqlSession查询的数据会被缓存，下次查询相同的数据，就会从缓存中</p> <p>直接获取，不会从数据库重新访问</p> <p>使一级缓存失效的四种情况：</p> <p>1)不同的SqlSession对应不同的一级缓存</p> <p>2)同一个SqlSession但是查询条件不同</p> <p>3)同一个SqlSessioni两次查询期间执行了任何一次增删改操作</p> <p>4)同一个SqlSessioni两次查询期间手动清空了缓存</p> <h3 id="不同的sqlsession对应不同的一级缓存"><a href="#不同的sqlsession对应不同的一级缓存" class="header-anchor">#</a> 不同的SqlSession对应不同的一级缓存</h3> <div class="language-java line-numbers-mode"><pre class="language-java"><code>    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testCache</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">SqlSession</span> sqlSession <span class="token operator">=</span> <span class="token class-name">SqlSessionUtils</span><span class="token punctuation">.</span><span class="token function">getSqlSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">CacheMapper</span> mapper <span class="token operator">=</span> sqlSession<span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">CacheMapper</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Emp</span> emp1 <span class="token operator">=</span> mapper<span class="token punctuation">.</span><span class="token function">getEmpById</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>emp1<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;========第二次调用========从缓存中取数据&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Emp</span> emp2 <span class="token operator">=</span> mapper<span class="token punctuation">.</span><span class="token function">getEmpById</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>emp2<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\n========即使用的不是同一个Mapper，也同样从缓存中取(同一个sqlsession)========&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">CacheMapper</span> mapper2 <span class="token operator">=</span> sqlSession<span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">CacheMapper</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Emp</span> empByMapper2 <span class="token operator">=</span> mapper2<span class="token punctuation">.</span><span class="token function">getEmpById</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>empByMapper2<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\n========一级缓存的范围在sqlsession中，换一个新的sqlsession就会再次用sql读取数据========&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">SqlSession</span> sqlSession2 <span class="token operator">=</span> <span class="token class-name">SqlSessionUtils</span><span class="token punctuation">.</span><span class="token function">getSqlSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">CacheMapper</span> mapper2BySqlSession2 <span class="token operator">=</span> sqlSession2<span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">CacheMapper</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>mapper2BySqlSession2<span class="token punctuation">.</span><span class="token function">getEmpById</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><h3 id="同一个sqlsession但是查询条件不同"><a href="#同一个sqlsession但是查询条件不同" class="header-anchor">#</a> 同一个SqlSession但是查询条件不同</h3> <div class="language-java line-numbers-mode"><pre class="language-java"><code>    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testCache3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">SqlSession</span> sqlSession <span class="token operator">=</span> <span class="token class-name">SqlSessionUtils</span><span class="token punctuation">.</span><span class="token function">getSqlSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">CacheMapper</span> mapper <span class="token operator">=</span> sqlSession<span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">CacheMapper</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;=====第一次获取数据=====&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Emp</span> emp1 <span class="token operator">=</span> mapper<span class="token punctuation">.</span><span class="token function">getEmpById</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>emp1<span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\n=====查询条件不同=====&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Emp</span> emp2 <span class="token operator">=</span> mapper<span class="token punctuation">.</span><span class="token function">getEmpById</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>emp2<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="同一个sqlsession两次查询期间执行了任何一次增删改操作"><a href="#同一个sqlsession两次查询期间执行了任何一次增删改操作" class="header-anchor">#</a> 同一个SqlSession两次查询期间执行了任何一次增删改操作</h3> <div class="language-java line-numbers-mode"><pre class="language-java"><code>    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testCache2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">SqlSession</span> sqlSession <span class="token operator">=</span> <span class="token class-name">SqlSessionUtils</span><span class="token punctuation">.</span><span class="token function">getSqlSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">CacheMapper</span> mapper <span class="token operator">=</span> sqlSession<span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">CacheMapper</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;=====第一次获取数据=====&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Emp</span> emp1 <span class="token operator">=</span> mapper<span class="token punctuation">.</span><span class="token function">getEmpById</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>emp1<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Emp</span> emp2 <span class="token operator">=</span> mapper<span class="token punctuation">.</span><span class="token function">getEmpById</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>emp2<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\n=====进行增删改操作=====&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        mapper<span class="token punctuation">.</span><span class="token function">insetEmp</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Emp</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token string">&quot;Joey&quot;</span><span class="token punctuation">,</span> <span class="token number">44</span><span class="token punctuation">,</span> <span class="token string">&quot;男&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;8888@gmai.com&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\n=====同一个sqlsession，再获取数据=====&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Emp</span> emp3 <span class="token operator">=</span> mapper<span class="token punctuation">.</span><span class="token function">getEmpById</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>emp3<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h3 id="同一个sqlsession两次查询期间手动清空了-一级-缓存"><a href="#同一个sqlsession两次查询期间手动清空了-一级-缓存" class="header-anchor">#</a> 同一个SqlSession两次查询期间手动清空了（一级）缓存</h3> <div class="language-java line-numbers-mode"><pre class="language-java"><code>    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testCache4</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">SqlSession</span> sqlSession <span class="token operator">=</span> <span class="token class-name">SqlSessionUtils</span><span class="token punctuation">.</span><span class="token function">getSqlSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">CacheMapper</span> mapper <span class="token operator">=</span> sqlSession<span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">CacheMapper</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;=====第一次获取数据=====&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Emp</span> emp1 <span class="token operator">=</span> mapper<span class="token punctuation">.</span><span class="token function">getEmpById</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>emp1<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\n=====两次查询期间手动清空缓存=====&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        sqlSession<span class="token punctuation">.</span><span class="token function">clearCache</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\n=====再次查询id=3的emp=====&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Emp</span> emp2 <span class="token operator">=</span> mapper<span class="token punctuation">.</span><span class="token function">getEmpById</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>emp2<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h2 id="mybatis二级缓存"><a href="#mybatis二级缓存" class="header-anchor">#</a> Mybatis二级缓存</h2> <p>二级缓存是SqlSessionFactory级别，通过同一个SqlSessionFactory创建的SqlSessioni查询的结果会被缓存；此后</p> <p>若再次执行相同的查询语句，结果就会从缓存中获取</p> <h3 id="二级缓存的开启条件"><a href="#二级缓存的开启条件" class="header-anchor">#</a> 二级缓存的开启条件</h3> <p>a&gt;在核心配置文件中，设置全局配置属性cacheEnabled-&quot;true&quot;,默认为true,不需要设置</p> <p>b&gt;在映射文件中设置标签<cache></cache></p> <p>c&gt;二级缓存必须在SqlSession关闭或提交之后有效</p> <p>d&gt;查询的数据所转换的实体类类型必须实现序列化的接口</p> <p>使二级缓存失效的情况：</p> <p>两次查询之间执行了任意的增删改，会使一级和二级缓存同时失效</p> <h3 id="在映射文件中设置标签-cache"><a href="#在映射文件中设置标签-cache" class="header-anchor">#</a> 在映射文件中设置标签<code>&lt;cache /&gt;</code></h3> <p><img alt="在这里插入图片描述" data-src="https://gitee.com/try-to-be-better/cloud-images/raw/master/img/9ef8960943cb3eb86c1574d02806fd65.png" loading="lazy" class="lazy"></p> <h3 id="测试"><a href="#测试" class="header-anchor">#</a> 测试</h3> <p>⚠️ 要把Emp Class加上<code>implements Serializable</code></p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testCacheTwo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">//这里不能用工具类了，因为每次都会创建新的sqlsessionfactory</span>
<span class="token comment">//        SqlSession sqlSession = SqlSessionUtils.getSqlSession();</span>
<span class="token comment">//        CacheMapper mapper = sqlSession.getMapper(CacheMapper.class);</span>

        <span class="token comment">//只要是同一个sqlsessionfactory获得的sqlsession就可以</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">InputStream</span> is <span class="token operator">=</span> <span class="token class-name">Resources</span><span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span><span class="token string">&quot;mybatis-config.xml&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">SqlSessionFactory</span> sqlSessionFactory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SqlSessionFactoryBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span>is<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">SqlSession</span> sqlSession1 <span class="token operator">=</span> sqlSessionFactory<span class="token punctuation">.</span><span class="token function">openSession</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">CacheMapper</span> mapper1 <span class="token operator">=</span> sqlSession1<span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">CacheMapper</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>mapper1<span class="token punctuation">.</span><span class="token function">getEmpById</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Cache Hit Ratio：缓存命中率，指的是在缓存中有没有这条数据&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;=====二级缓存未打开，没从缓存中获取数据=====&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">SqlSession</span> sqlSession2 <span class="token operator">=</span> sqlSessionFactory<span class="token punctuation">.</span><span class="token function">openSession</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">CacheMapper</span> mapper2 <span class="token operator">=</span> sqlSession2<span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">CacheMapper</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>mapper2<span class="token punctuation">.</span><span class="token function">getEmpById</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><p>关闭sqlSession，再看是用sql从数据库读取数据还是从缓存中取数据：</p> <p><img alt="在这里插入图片描述" data-src="https://gitee.com/try-to-be-better/cloud-images/raw/master/img/bd956260a0617c4c4012c0fe951b70d6.png" loading="lazy" class="lazy"></p> <h2 id="mybatis缓存查询的顺序"><a href="#mybatis缓存查询的顺序" class="header-anchor">#</a> Mybatis缓存查询的顺序</h2> <p>先查询二级缓存，因为二级缓存中可能会有其他程序已经查出来的数据，可以拿来直接使用。</p> <p>如果二级缓存没有命中，再查询一级缓存</p> <p>如果一级缓存也设没有命中，则查询数据库</p> <p>SqlSession关闭之后，一级缓存中的数据会写入二级缓存</p> <h2 id="mybatis整合第三方缓存ehchahe"><a href="#mybatis整合第三方缓存ehchahe" class="header-anchor">#</a> Mybatis整合第三方缓存EHChahe</h2> <p>记得补充maven</p> <h1 id="mybatis的逆向工程-清新简洁版"><a href="#mybatis的逆向工程-清新简洁版" class="header-anchor">#</a> Mybatis的逆向工程（清新简洁版）</h1> <p>正向工程：先创建Java实体类，由框架负责根据实体类生成数据库表。Hibernate是支持正向工程的。</p> <p>逆向工程：先创建数据库表，由框架负责根据数据库表，反向生成如下资源：</p> <p>Java实体类</p> <p>Mapper接口</p> <p>Mapper映射文件</p> <h2 id="创建逆向工程的步骤"><a href="#创建逆向工程的步骤" class="header-anchor">#</a> 创建逆向工程的步骤</h2> <h3 id="添加依赖和插件"><a href="#添加依赖和插件" class="header-anchor">#</a> 添加依赖和插件</h3> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token generics"><span class="token punctuation">&lt;</span>dependencies<span class="token punctuation">&gt;</span></span>
	<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> <span class="token class-name">MyBatis</span>核心依赖包 <span class="token operator">--</span><span class="token operator">&gt;</span>
	<span class="token generics"><span class="token punctuation">&lt;</span>dependency<span class="token punctuation">&gt;</span></span>
		<span class="token generics"><span class="token punctuation">&lt;</span>groupId<span class="token punctuation">&gt;</span></span>org<span class="token punctuation">.</span>mybatis<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">&gt;</span>
		<span class="token generics"><span class="token punctuation">&lt;</span>artifactId<span class="token punctuation">&gt;</span></span>mybatis<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">&gt;</span>
		<span class="token generics"><span class="token punctuation">&lt;</span>version<span class="token punctuation">&gt;</span></span><span class="token number">3.5</span><span class="token number">.9</span><span class="token operator">&lt;</span><span class="token operator">/</span>version<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token operator">/</span>dependency<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> junit测试 <span class="token operator">--</span><span class="token operator">&gt;</span>
	<span class="token generics"><span class="token punctuation">&lt;</span>dependency<span class="token punctuation">&gt;</span></span>
		<span class="token generics"><span class="token punctuation">&lt;</span>groupId<span class="token punctuation">&gt;</span></span>junit<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">&gt;</span>
		<span class="token generics"><span class="token punctuation">&lt;</span>artifactId<span class="token punctuation">&gt;</span></span>junit<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">&gt;</span>
		<span class="token generics"><span class="token punctuation">&lt;</span>version<span class="token punctuation">&gt;</span></span><span class="token number">4.13</span><span class="token number">.2</span><span class="token operator">&lt;</span><span class="token operator">/</span>version<span class="token operator">&gt;</span>
		<span class="token generics"><span class="token punctuation">&lt;</span>scope<span class="token punctuation">&gt;</span></span>test<span class="token operator">&lt;</span><span class="token operator">/</span>scope<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token operator">/</span>dependency<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> <span class="token class-name">MySQL</span>驱动 <span class="token operator">--</span><span class="token operator">&gt;</span>
	<span class="token generics"><span class="token punctuation">&lt;</span>dependency<span class="token punctuation">&gt;</span></span>
		<span class="token generics"><span class="token punctuation">&lt;</span>groupId<span class="token punctuation">&gt;</span></span>mysql<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">&gt;</span>
		<span class="token generics"><span class="token punctuation">&lt;</span>artifactId<span class="token punctuation">&gt;</span></span>mysql<span class="token operator">-</span>connector<span class="token operator">-</span>java<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">&gt;</span>
		<span class="token generics"><span class="token punctuation">&lt;</span>version<span class="token punctuation">&gt;</span></span><span class="token number">8.0</span><span class="token number">.27</span><span class="token operator">&lt;</span><span class="token operator">/</span>version<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token operator">/</span>dependency<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> log4j日志 <span class="token operator">--</span><span class="token operator">&gt;</span>
	<span class="token generics"><span class="token punctuation">&lt;</span>dependency<span class="token punctuation">&gt;</span></span>
		<span class="token generics"><span class="token punctuation">&lt;</span>groupId<span class="token punctuation">&gt;</span></span>log4j<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">&gt;</span>
		<span class="token generics"><span class="token punctuation">&lt;</span>artifactId<span class="token punctuation">&gt;</span></span>log4j<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">&gt;</span>
		<span class="token generics"><span class="token punctuation">&lt;</span>version<span class="token punctuation">&gt;</span></span><span class="token number">1.2</span><span class="token number">.17</span><span class="token operator">&lt;</span><span class="token operator">/</span>version<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token operator">/</span>dependency<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>dependencies<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 控制<span class="token class-name">Maven</span>在构建过程中相关配置 <span class="token operator">--</span><span class="token operator">&gt;</span>
<span class="token generics"><span class="token punctuation">&lt;</span>build<span class="token punctuation">&gt;</span></span>
	<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 构建过程中用到的插件 <span class="token operator">--</span><span class="token operator">&gt;</span>
	<span class="token generics"><span class="token punctuation">&lt;</span>plugins<span class="token punctuation">&gt;</span></span>
		<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 具体插件，逆向工程的操作是以构建过程中插件形式出现的 <span class="token operator">--</span><span class="token operator">&gt;</span>
		<span class="token generics"><span class="token punctuation">&lt;</span>plugin<span class="token punctuation">&gt;</span></span>
			<span class="token generics"><span class="token punctuation">&lt;</span>groupId<span class="token punctuation">&gt;</span></span>org<span class="token punctuation">.</span>mybatis<span class="token punctuation">.</span>generator<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">&gt;</span>
			<span class="token generics"><span class="token punctuation">&lt;</span>artifactId<span class="token punctuation">&gt;</span></span>mybatis<span class="token operator">-</span>generator<span class="token operator">-</span>maven<span class="token operator">-</span>plugin<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">&gt;</span>
			<span class="token generics"><span class="token punctuation">&lt;</span>version<span class="token punctuation">&gt;</span></span><span class="token number">1.3</span><span class="token number">.0</span><span class="token operator">&lt;</span><span class="token operator">/</span>version<span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 插件的依赖 <span class="token operator">--</span><span class="token operator">&gt;</span>
			<span class="token generics"><span class="token punctuation">&lt;</span>dependencies<span class="token punctuation">&gt;</span></span>
				<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 逆向工程的核心依赖 <span class="token operator">--</span><span class="token operator">&gt;</span>
				<span class="token generics"><span class="token punctuation">&lt;</span>dependency<span class="token punctuation">&gt;</span></span>
					<span class="token generics"><span class="token punctuation">&lt;</span>groupId<span class="token punctuation">&gt;</span></span>org<span class="token punctuation">.</span>mybatis<span class="token punctuation">.</span>generator<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">&gt;</span>
					<span class="token generics"><span class="token punctuation">&lt;</span>artifactId<span class="token punctuation">&gt;</span></span>mybatis<span class="token operator">-</span>generator<span class="token operator">-</span>core<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">&gt;</span>
					<span class="token generics"><span class="token punctuation">&lt;</span>version<span class="token punctuation">&gt;</span></span><span class="token number">1.3</span><span class="token number">.2</span><span class="token operator">&lt;</span><span class="token operator">/</span>version<span class="token operator">&gt;</span>
				<span class="token operator">&lt;</span><span class="token operator">/</span>dependency<span class="token operator">&gt;</span>
				<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 数据库连接池 <span class="token operator">--</span><span class="token operator">&gt;</span>
				<span class="token generics"><span class="token punctuation">&lt;</span>dependency<span class="token punctuation">&gt;</span></span>
					<span class="token generics"><span class="token punctuation">&lt;</span>groupId<span class="token punctuation">&gt;</span></span>com<span class="token punctuation">.</span>mchange<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">&gt;</span>
					<span class="token generics"><span class="token punctuation">&lt;</span>artifactId<span class="token punctuation">&gt;</span></span>c3p0<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">&gt;</span>
					<span class="token generics"><span class="token punctuation">&lt;</span>version<span class="token punctuation">&gt;</span></span><span class="token number">0.9</span><span class="token number">.2</span><span class="token operator">&lt;</span><span class="token operator">/</span>version<span class="token operator">&gt;</span>
				<span class="token operator">&lt;</span><span class="token operator">/</span>dependency<span class="token operator">&gt;</span>
				<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> <span class="token class-name">MySQL</span>驱动 <span class="token operator">--</span><span class="token operator">&gt;</span>
				<span class="token generics"><span class="token punctuation">&lt;</span>dependency<span class="token punctuation">&gt;</span></span>
					<span class="token generics"><span class="token punctuation">&lt;</span>groupId<span class="token punctuation">&gt;</span></span>mysql<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">&gt;</span>
					<span class="token generics"><span class="token punctuation">&lt;</span>artifactId<span class="token punctuation">&gt;</span></span>mysql<span class="token operator">-</span>connector<span class="token operator">-</span>java<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">&gt;</span>
					<span class="token generics"><span class="token punctuation">&lt;</span>version<span class="token punctuation">&gt;</span></span><span class="token number">8.0</span><span class="token number">.27</span><span class="token operator">&lt;</span><span class="token operator">/</span>version<span class="token operator">&gt;</span>
				<span class="token operator">&lt;</span><span class="token operator">/</span>dependency<span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span><span class="token operator">/</span>dependencies<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span><span class="token operator">/</span>plugin<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token operator">/</span>plugins<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>build<span class="token operator">&gt;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br></div></div><h3 id="创建mybatis的核心配置文件-2"><a href="#创建mybatis的核心配置文件-2" class="header-anchor">#</a> 创建MyBatis的核心配置文件</h3> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token operator">&lt;</span><span class="token operator">?</span>xml version<span class="token operator">=</span><span class="token string">&quot;1.0&quot;</span> encoding<span class="token operator">=</span><span class="token string">&quot;UTF-8&quot;</span> <span class="token operator">?</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token constant">DOCTYPE</span> configuration
        <span class="token constant">PUBLIC</span> <span class="token string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span>
        <span class="token string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span><span class="token operator">&gt;</span>
<span class="token generics"><span class="token punctuation">&lt;</span>configuration<span class="token punctuation">&gt;</span></span>
    <span class="token operator">&lt;</span>properties resource<span class="token operator">=</span><span class="token string">&quot;jdbc.properties&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token generics"><span class="token punctuation">&lt;</span>typeAliases<span class="token punctuation">&gt;</span></span>
        <span class="token operator">&lt;</span><span class="token keyword">package</span> <span class="token namespace">name</span><span class="token operator">=</span><span class="token string">&quot;&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>typeAliases<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>environments <span class="token keyword">default</span><span class="token operator">=</span><span class="token string">&quot;development&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>environment id<span class="token operator">=</span><span class="token string">&quot;development&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>transactionManager type<span class="token operator">=</span><span class="token string">&quot;JDBC&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>dataSource type<span class="token operator">=</span><span class="token string">&quot;POOLED&quot;</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>property name<span class="token operator">=</span><span class="token string">&quot;driver&quot;</span> value<span class="token operator">=</span><span class="token string">&quot;${jdbc.driver}&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>property name<span class="token operator">=</span><span class="token string">&quot;url&quot;</span> value<span class="token operator">=</span><span class="token string">&quot;${jdbc.url}&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>property name<span class="token operator">=</span><span class="token string">&quot;username&quot;</span> value<span class="token operator">=</span><span class="token string">&quot;${jdbc.username}&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>property name<span class="token operator">=</span><span class="token string">&quot;password&quot;</span> value<span class="token operator">=</span><span class="token string">&quot;${jdbc.password}&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>dataSource<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>environment<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>environments<span class="token operator">&gt;</span>
    <span class="token generics"><span class="token punctuation">&lt;</span>mappers<span class="token punctuation">&gt;</span></span>
        <span class="token operator">&lt;</span><span class="token keyword">package</span> <span class="token namespace">name</span><span class="token operator">=</span><span class="token string">&quot;&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>mappers<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>configuration<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><h3 id="创建逆向工程的配置文件"><a href="#创建逆向工程的配置文件" class="header-anchor">#</a> 创建逆向工程的配置文件</h3> <ul><li>文件名必须是：<code>generatorConfig.xml</code></li> <li>targetRuntime: 执行生成的逆向工程的版本</li> <li>MyBatis3Simple: 生成基本的CRUD（清新简洁版）</li> <li>MyBatis3: 生成带条件的CRUD（奢华尊享版）</li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token operator">&lt;</span><span class="token operator">?</span>xml version<span class="token operator">=</span><span class="token string">&quot;1.0&quot;</span> encoding<span class="token operator">=</span><span class="token string">&quot;UTF-8&quot;</span><span class="token operator">?</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token constant">DOCTYPE</span> generatorConfiguration
        <span class="token constant">PUBLIC</span> <span class="token string">&quot;-//mybatis.org//DTD MyBatis Generator Configuration 1.0//EN&quot;</span>
        <span class="token string">&quot;http://mybatis.org/dtd/mybatis-generator-config_1_0.dtd&quot;</span><span class="token operator">&gt;</span>
<span class="token generics"><span class="token punctuation">&lt;</span>generatorConfiguration<span class="token punctuation">&gt;</span></span>
    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>
    targetRuntime<span class="token operator">:</span> 执行生成的逆向工程的版本
    <span class="token class-name">MyBatis3Simple</span><span class="token operator">:</span> 生成基本的<span class="token constant">CRUD</span>（清新简洁版）
    <span class="token class-name">MyBatis3</span><span class="token operator">:</span> 生成带条件的<span class="token constant">CRUD</span>（奢华尊享版）
    <span class="token operator">--</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>context id<span class="token operator">=</span><span class="token string">&quot;DB2Tables&quot;</span> targetRuntime<span class="token operator">=</span><span class="token string">&quot;MyBatis3Simple&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 数据库的连接信息 <span class="token operator">--</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>jdbcConnection driverClass<span class="token operator">=</span><span class="token string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>
                        connectionURL<span class="token operator">=</span><span class="token string">&quot;jdbc:mysql://localhost:3306/lanqiao?serverTimezone=GMT&quot;</span>
                        userId<span class="token operator">=</span><span class="token string">&quot;root&quot;</span>
                        password<span class="token operator">=</span><span class="token string">&quot;123456&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>jdbcConnection<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> javaBean的生成策略<span class="token operator">--</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>javaModelGenerator targetPackage<span class="token operator">=</span><span class="token string">&quot;cn.lanqiao.pojo&quot;</span> targetProject<span class="token operator">=</span><span class="token string">&quot;.\src\main\java&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>property name<span class="token operator">=</span><span class="token string">&quot;enableSubPackages&quot;</span> value<span class="token operator">=</span><span class="token string">&quot;true&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>property name<span class="token operator">=</span><span class="token string">&quot;trimStrings&quot;</span> value<span class="token operator">=</span><span class="token string">&quot;true&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>javaModelGenerator<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> <span class="token constant">SQL</span>映射文件的生成策略 <span class="token operator">--</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>sqlMapGenerator targetPackage<span class="token operator">=</span><span class="token string">&quot;cn.lanqiao.mapper&quot;</span>
                         targetProject<span class="token operator">=</span><span class="token string">&quot;.\src\main\resources&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>property name<span class="token operator">=</span><span class="token string">&quot;enableSubPackages&quot;</span> value<span class="token operator">=</span><span class="token string">&quot;true&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>sqlMapGenerator<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> <span class="token class-name">Mapper</span>接口的生成策略 <span class="token operator">--</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>javaClientGenerator type<span class="token operator">=</span><span class="token string">&quot;XMLMAPPER&quot;</span>
                             targetPackage<span class="token operator">=</span><span class="token string">&quot;cn.lanqiao.mapper&quot;</span> targetProject<span class="token operator">=</span><span class="token string">&quot;.\src\main\java&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>property name<span class="token operator">=</span><span class="token string">&quot;enableSubPackages&quot;</span> value<span class="token operator">=</span><span class="token string">&quot;true&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>javaClientGenerator<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 逆向分析的表 <span class="token operator">--</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> tableName设置为<span class="token operator">*</span>号，可以对应所有表，此时不写domainObjectName <span class="token operator">--</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> domainObjectName属性指定生成出来的实体类的类名 <span class="token operator">--</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>table tableName<span class="token operator">=</span><span class="token string">&quot;t_emp&quot;</span> domainObjectName<span class="token operator">=</span><span class="token string">&quot;Emp&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>table tableName<span class="token operator">=</span><span class="token string">&quot;t_dept&quot;</span> domainObjectName<span class="token operator">=</span><span class="token string">&quot;Dept&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>context<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>generatorConfiguration<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br></div></div><h1 id="mybatis的逆向工程-奢华尊享版"><a href="#mybatis的逆向工程-奢华尊享版" class="header-anchor">#</a> Mybatis的逆向工程（奢华尊享版）</h1>
&lt;!DOCTYPE generatorConfiguration
        PUBLIC &quot;-//mybatis.org//DTD MyBatis Generator Configuration 1.0//EN&quot;
        &quot;http://mybatis.org/dtd/mybatis-generator-config_1_0.dtd&quot;&gt;
<generatorConfiguration><context id="DB2Tables" targetRuntime="MyBatis3"><jdbcConnection driverClass="com.mysql.cj.jdbc.Driver" connectionURL="jdbc:mysql://localhost:3306/lanqiao?serverTimezone=GMT" userId="root" password="123456"></jdbcConnection> <javaModelGenerator targetPackage="cn.lanqiao.pojo" targetProject=".\src\main\java"><property name="enableSubPackages" value="true"></property> <property name="trimStrings" value="true"></property></javaModelGenerator> <sqlMapGenerator targetPackage="cn.lanqiao.mapper" targetProject=".\src\main\resources"><property name="enableSubPackages" value="true"></property></sqlMapGenerator> <javaClientGenerator type="XMLMAPPER" targetPackage="cn.lanqiao.mapper" targetProject=".\src\main\java"><property name="enableSubPackages" value="true"></property></javaClientGenerator> <table tableName="t_emp" domainObjectName="Emp"></table> <table tableName="t_dept" domainObjectName="Dept"></table></context></generatorConfiguration> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token operator">&lt;</span><span class="token operator">?</span>xml version<span class="token operator">=</span><span class="token string">&quot;1.0&quot;</span> encoding<span class="token operator">=</span><span class="token string">&quot;UTF-8&quot;</span><span class="token operator">?</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token constant">DOCTYPE</span> generatorConfiguration
        <span class="token constant">PUBLIC</span> <span class="token string">&quot;-//mybatis.org//DTD MyBatis Generator Configuration 1.0//EN&quot;</span>
        <span class="token string">&quot;http://mybatis.org/dtd/mybatis-generator-config_1_0.dtd&quot;</span><span class="token operator">&gt;</span>
<span class="token generics"><span class="token punctuation">&lt;</span>generatorConfiguration<span class="token punctuation">&gt;</span></span>
    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>
    targetRuntime<span class="token operator">:</span> 执行生成的逆向工程的版本
    <span class="token class-name">MyBatis3Simple</span><span class="token operator">:</span> 生成基本的<span class="token constant">CRUD</span>（清新简洁版）
    <span class="token class-name">MyBatis3</span><span class="token operator">:</span> 生成带条件的<span class="token constant">CRUD</span>（奢华尊享版）
    <span class="token operator">--</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>context id<span class="token operator">=</span><span class="token string">&quot;DB2Tables&quot;</span> targetRuntime<span class="token operator">=</span><span class="token string">&quot;MyBatis3Simple&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 数据库的连接信息 <span class="token operator">--</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>jdbcConnection driverClass<span class="token operator">=</span><span class="token string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>
                        connectionURL<span class="token operator">=</span><span class="token string">&quot;jdbc:mysql://localhost:3306/lanqiao?serverTimezone=GMT&quot;</span>
                        userId<span class="token operator">=</span><span class="token string">&quot;root&quot;</span>
                        password<span class="token operator">=</span><span class="token string">&quot;123456&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>jdbcConnection<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> javaBean的生成策略<span class="token operator">--</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>javaModelGenerator targetPackage<span class="token operator">=</span><span class="token string">&quot;cn.lanqiao.pojo&quot;</span> targetProject<span class="token operator">=</span><span class="token string">&quot;.\src\main\java&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>property name<span class="token operator">=</span><span class="token string">&quot;enableSubPackages&quot;</span> value<span class="token operator">=</span><span class="token string">&quot;true&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>property name<span class="token operator">=</span><span class="token string">&quot;trimStrings&quot;</span> value<span class="token operator">=</span><span class="token string">&quot;true&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>javaModelGenerator<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> <span class="token constant">SQL</span>映射文件的生成策略 <span class="token operator">--</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>sqlMapGenerator targetPackage<span class="token operator">=</span><span class="token string">&quot;cn.lanqiao.mapper&quot;</span>
                         targetProject<span class="token operator">=</span><span class="token string">&quot;.\src\main\resources&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>property name<span class="token operator">=</span><span class="token string">&quot;enableSubPackages&quot;</span> value<span class="token operator">=</span><span class="token string">&quot;true&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>sqlMapGenerator<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> <span class="token class-name">Mapper</span>接口的生成策略 <span class="token operator">--</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>javaClientGenerator type<span class="token operator">=</span><span class="token string">&quot;XMLMAPPER&quot;</span>
                             targetPackage<span class="token operator">=</span><span class="token string">&quot;cn.lanqiao.mapper&quot;</span> targetProject<span class="token operator">=</span><span class="token string">&quot;.\src\main\java&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>property name<span class="token operator">=</span><span class="token string">&quot;enableSubPackages&quot;</span> value<span class="token operator">=</span><span class="token string">&quot;true&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>javaClientGenerator<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 逆向分析的表 <span class="token operator">--</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> tableName设置为<span class="token operator">*</span>号，可以对应所有表，此时不写domainObjectName <span class="token operator">--</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> domainObjectName属性指定生成出来的实体类的类名 <span class="token operator">--</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>table tableName<span class="token operator">=</span><span class="token string">&quot;t_emp&quot;</span> domainObjectName<span class="token operator">=</span><span class="token string">&quot;Emp&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>table tableName<span class="token operator">=</span><span class="token string">&quot;t_dept&quot;</span> domainObjectName<span class="token operator">=</span><span class="token string">&quot;Dept&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>context<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>generatorConfiguration<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br></div></div><h2 id="qbc"><a href="#qbc" class="header-anchor">#</a> QBC</h2> <h3 id="查询"><a href="#查询" class="header-anchor">#</a> 查询</h3> <p>selectByExample：按条件查询，需要传入一个example对象或者null；如果传入一个null，则表示没有条件，也就是查询所有数据</p> <p>example.createCriteria().xxx：创建条件对象，通过andXXX方法为SQL添加查询添加，每个条件之间是and关系</p> <p>example.or().xxx：将之前添加的条件通过or拼接其他条件</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span> 
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testMBG</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
	<span class="token class-name">InputStream</span> is <span class="token operator">=</span> <span class="token class-name">Resources</span><span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span><span class="token string">&quot;mybatis-config.xml&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token class-name">SqlSessionFactoryBuilder</span> sqlSessionFactoryBuilder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SqlSessionFactoryBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token class-name">SqlSessionFactory</span> sqlSessionFactory <span class="token operator">=</span> sqlSessionFactoryBuilder<span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span>is<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token class-name">SqlSession</span> sqlSession <span class="token operator">=</span> sqlSessionFactory<span class="token punctuation">.</span><span class="token function">openSession</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token class-name">EmpMapper</span> mapper <span class="token operator">=</span> sqlSession<span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">EmpMapper</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token class-name">EmpExample</span> example <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">EmpExample</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//名字为张三，且年龄大于等于20</span>
	example<span class="token punctuation">.</span><span class="token function">createCriteria</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">andEmpNameEqualTo</span><span class="token punctuation">(</span><span class="token string">&quot;张三&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">andAgeGreaterThanOrEqualTo</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//或者did不为空</span>
	example<span class="token punctuation">.</span><span class="token function">or</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">andDidIsNotNull</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Emp</span><span class="token punctuation">&gt;</span></span> emps <span class="token operator">=</span> mapper<span class="token punctuation">.</span><span class="token function">selectByExample</span><span class="token punctuation">(</span>example<span class="token punctuation">)</span><span class="token punctuation">;</span>
	emps<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">::</span><span class="token function">println</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h3 id="增改"><a href="#增改" class="header-anchor">#</a> 增改</h3> <p><code>updateByPrimaryKey</code>：通过主键进行数据修改，如果某一个值为null，也会将对应的字段改为null</p> <p>mapper.updateByPrimaryKey(new Emp(1,&quot;admin&quot;,22,null,&quot;456@qq.com&quot;,3));</p> <p><img alt="在这里插入图片描述" data-src="https://img-blog.csdnimg.cn/fe0f83eae0b64fab9486670023877fd4.png#pic_center" loading="lazy" class="lazy"></p> <p>updateByPrimaryKeySelective()：通过主键进行选择性数据修改，如果某个值为null，则不修改这个字段</p> <p>mapper.updateByPrimaryKeySelective(new Emp(2,&quot;admin2&quot;,22,null,&quot;456@qq.com&quot;,3));</p> <p><img alt="在这里插入图片描述" data-src="https://img-blog.csdnimg.cn/16f5400fa78e4adfae90046e7f331555.png#pic_center" loading="lazy" class="lazy"></p> <h1 id="mybatis的分页插件简介"><a href="#mybatis的分页插件简介" class="header-anchor">#</a> Mybatis的分页插件简介</h1> <p><img alt="在这里插入图片描述" data-src="https://gitee.com/try-to-be-better/cloud-images/raw/master/img/440418312b498d779078c613bf632385.png" loading="lazy" class="lazy"></p> <h2 id="分页插件使用步骤"><a href="#分页插件使用步骤" class="header-anchor">#</a> 分页插件使用步骤</h2> <h3 id="添加依赖"><a href="#添加依赖" class="header-anchor">#</a> 添加依赖</h3> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>mvnrepository<span class="token punctuation">.</span>com<span class="token operator">/</span>artifact<span class="token operator">/</span>com<span class="token punctuation">.</span>github<span class="token punctuation">.</span>pagehelper<span class="token operator">/</span>pagehelper <span class="token operator">--</span><span class="token operator">&gt;</span>
<span class="token generics"><span class="token punctuation">&lt;</span>dependency<span class="token punctuation">&gt;</span></span>
    <span class="token generics"><span class="token punctuation">&lt;</span>groupId<span class="token punctuation">&gt;</span></span>com<span class="token punctuation">.</span>github<span class="token punctuation">.</span>pagehelper<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">&gt;</span>
    <span class="token generics"><span class="token punctuation">&lt;</span>artifactId<span class="token punctuation">&gt;</span></span>pagehelper<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">&gt;</span>
    <span class="token generics"><span class="token punctuation">&lt;</span>version<span class="token punctuation">&gt;</span></span><span class="token number">5.2</span><span class="token number">.0</span><span class="token operator">&lt;</span><span class="token operator">/</span>version<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>dependency<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="配置分页插件"><a href="#配置分页插件" class="header-anchor">#</a> 配置分页插件</h3> <ul><li>在MyBatis的核心配置文件（mybatis-config.xml）中配置插件</li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token generics"><span class="token punctuation">&lt;</span>plugins<span class="token punctuation">&gt;</span></span>
	<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>设置分页插件<span class="token operator">--</span><span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>plugin interceptor<span class="token operator">=</span><span class="token string">&quot;com.github.pagehelper.PageInterceptor&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>plugin<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>plugins<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="分页插件的使用"><a href="#分页插件的使用" class="header-anchor">#</a> 分页插件的使用</h2> <h3 id="开启分页功能"><a href="#开启分页功能" class="header-anchor">#</a> 开启分页功能</h3> <ul><li><p>在查询功能之前使用</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>PageHelper.startPage(int pageNum, int pageSize)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>开启分页功能</p> <ul><li>pageNum：当前页的页码</li> <li>pageSize：每页显示的条数</li></ul></li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>@Test
public void testPageHelper() throws IOException {
	InputStream is = Resources.getResourceAsStream(&quot;mybatis-config.xml&quot;);
	SqlSessionFactoryBuilder sqlSessionFactoryBuilder = new SqlSessionFactoryBuilder();
	SqlSessionFactory sqlSessionFactory = sqlSessionFactoryBuilder.build(is);
	SqlSession sqlSession = sqlSessionFactory.openSession(true);
	EmpMapper mapper = sqlSession.getMapper(EmpMapper.class);
	//访问第一页，每页四条数据
	PageHelper.startPage(1,4);
	List&lt;Emp&gt; emps = mapper.selectByExample(null);
	emps.forEach(System.out::println);
}

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h3 id="分页相关数据"><a href="#分页相关数据" class="header-anchor">#</a> 分页相关数据</h3> <h4 id="方法一-直接输出"><a href="#方法一-直接输出" class="header-anchor">#</a> 方法一：直接输出</h4> <div class="language- line-numbers-mode"><pre class="language-text"><code>@Test
public void testPageHelper() throws IOException {
	InputStream is = Resources.getResourceAsStream(&quot;mybatis-config.xml&quot;);
	SqlSessionFactoryBuilder sqlSessionFactoryBuilder = new SqlSessionFactoryBuilder();
	SqlSessionFactory sqlSessionFactory = sqlSessionFactoryBuilder.build(is);
	SqlSession sqlSession = sqlSessionFactory.openSession(true);
	EmpMapper mapper = sqlSession.getMapper(EmpMapper.class);
	//访问第一页，每页四条数据
	Page&lt;Object&gt; page = PageHelper.startPage(1, 4);
	List&lt;Emp&gt; emps = mapper.selectByExample(null);
	//在查询到List集合后，打印分页数据
	System.out.println(page);
}

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h4 id="方法二使用pageinfo"><a href="#方法二使用pageinfo" class="header-anchor">#</a> 方法二使用PageInfo</h4> <ul><li><p>在查询获取list集合之后，使用</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>PageInfo&lt;T&gt; pageInfo = new PageInfo&lt;&gt;(List&lt;T&gt; list, intnavigatePages)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>获取分页相关数据</p> <ul><li>list：分页之后的数据</li> <li>navigatePages：导航分页的页码数</li></ul></li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>@Test
public void testPageHelper() throws IOException {
	InputStream is = Resources.getResourceAsStream(&quot;mybatis-config.xml&quot;);
	SqlSessionFactoryBuilder sqlSessionFactoryBuilder = new SqlSessionFactoryBuilder();
	SqlSessionFactory sqlSessionFactory = sqlSessionFactoryBuilder.build(is);
	SqlSession sqlSession = sqlSessionFactory.openSession(true);
	EmpMapper mapper = sqlSession.getMapper(EmpMapper.class);
	PageHelper.startPage(1, 4);
	List&lt;Emp&gt; emps = mapper.selectByExample(null);
	PageInfo&lt;Emp&gt; page = new PageInfo&lt;&gt;(emps,5);
	System.out.println(page);
}

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>常用数据：</p> <p>pageNum：当前页的页码</p> <p>pageSize：每页显示的条数</p> <p>size：当前页显示的真实条数</p> <p>total：总记录数</p> <p>pages：总页数</p> <p>prePage：上一页的页码</p> <p>nextPage：下一页的页码</p> <p>isFirstPage/isLastPage：是否为第一页/最后一页</p> <p>hasPreviousPage/hasNextPage：是否存在上一页/下一页</p> <p>navigatePages：导航分页的页码数</p> <p>navigatepageNums：导航分页的页码，[1,2,3,4,5]</p></div> <footer class="page-edit" style="margin:0;"><div class="edit-link"><a href="https://github.com/liyupi/codefather/edit/master/Mybatis基础/Mybatis.md" target="_blank" rel="noopener noreferrer">完善页面</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----></footer> <!----></div> <div class="toc-container-sidebar"><div class="pos-box"><div class="icon-arrow"></div> <div class="scroll-box" style="max-height:86vh"><div style="font-weight:bold;">Mybatis简介</div> <hr> <div class="toc-box"><ul class="toc-sidebar-links"><li><a href="/mybatis/#mybatis历史" class="toc-sidebar-link">Mybatis历史</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/mybatis/#mybatis的特性" class="toc-sidebar-link">Mybatis的特性</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/mybatis/#mybatis的下载" class="toc-sidebar-link">Mybatis的下载</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/mybatis/#和其它持久化层技术对比" class="toc-sidebar-link">和其它持久化层技术对比</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/mybatis/#搭建mybatis" class="toc-sidebar-link">搭建Mybatis</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/mybatis/#创建mybatis的核心配置文件" class="toc-sidebar-link">创建MyBatis的核心配置文件</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/mybatis/#创建mapper接口" class="toc-sidebar-link">创建Mapper接口</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/mybatis/#创建mybatis的映射文件" class="toc-sidebar-link">创建Mybatis的映射文件</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/mybatis/#通过junit测试功能" class="toc-sidebar-link">通过junit测试功能</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/mybatis/#加入log4j日志功能" class="toc-sidebar-link">加入log4j日志功能</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/mybatis/#日志级别" class="toc-sidebar-link">日志级别:</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/mybatis/#user" class="toc-sidebar-link">User</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/mybatis/#usermapper" class="toc-sidebar-link">UserMapper</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/mybatis/#mybatis-config-xml配置文件" class="toc-sidebar-link">mybatis-config.xml配置文件</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/mybatis/#测试类" class="toc-sidebar-link">测试类</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/mybatis/#jdbc-properties" class="toc-sidebar-link">jdbc.properties</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/mybatis/#mybatis-config-xml" class="toc-sidebar-link">Mybatis-config.xml</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/mybatis/#mapper接口方法的参数为单个的字面量类型" class="toc-sidebar-link">Mapper接口方法的参数为单个的字面量类型</a><ul class="toc-sidebar-sub-headers"><li class="toc-sidebar-sub-header"><a href="/mybatis/#用户名查询信息" class="toc-sidebar-link">用户名查询信息</a></li></ul></li><li><a href="/mybatis/#mapper接口方法的参数为多个时" class="toc-sidebar-link">mapper接口方法的参数为多个时</a><ul class="toc-sidebar-sub-headers"><li class="toc-sidebar-sub-header"><a href="/mybatis/#登录功能" class="toc-sidebar-link">登录功能</a></li></ul></li><li><a href="/mybatis/#mapper接口方法的参数有多个时-可以手动将这些参数放在一个map中存储" class="toc-sidebar-link">mapper接口方法的参数有多个时，可以手动将这些参数放在一个map中存储</a><ul class="toc-sidebar-sub-headers"><li class="toc-sidebar-sub-header"><a href="/mybatis/#验证登录" class="toc-sidebar-link">验证登录</a></li></ul></li><li><a href="/mybatis/#_4-mapper接口方法的参数是实体类类型的参数" class="toc-sidebar-link">4.mapper接口方法的参数是实体类类型的参数</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/mybatis/#_5-使用-param注解命名参数" class="toc-sidebar-link">5.使用@Param注解命名参数</a><ul class="toc-sidebar-sub-headers"><li class="toc-sidebar-sub-header"><a href="/mybatis/#验证登录-使用-param" class="toc-sidebar-link">验证登录(使用@Param)</a></li></ul></li><li><a href="/mybatis/#查询一个实体类对象" class="toc-sidebar-link">查询一个实体类对象</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/mybatis/#查询用户的总记录数-单行单列" class="toc-sidebar-link">查询用户的总记录数(单行单列)</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/mybatis/#默认的类型别名" class="toc-sidebar-link">默认的类型别名</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/mybatis/#查询map集合" class="toc-sidebar-link">查询Map集合</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/mybatis/#查询所有用户信息为map集合" class="toc-sidebar-link">查询所有用户信息为Map集合</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/mybatis/#mybatis处理模糊查询" class="toc-sidebar-link">Mybatis处理模糊查询</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/mybatis/#mybatis批量删除" class="toc-sidebar-link">Mybatis批量删除</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/mybatis/#mybatis动态设置表名" class="toc-sidebar-link">Mybatis动态设置表名</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/mybatis/#添加功能获取自增的主键" class="toc-sidebar-link">添加功能获取自增的主键</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/mybatis/#resultmap处理字段和属性的映射关系" class="toc-sidebar-link">resultMap处理字段和属性的映射关系</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/mybatis/#第一种-处理多对一的映射关系" class="toc-sidebar-link">第一种:处理多对一的映射关系</a><ul class="toc-sidebar-sub-headers"><li class="toc-sidebar-sub-header"><a href="/mybatis/#通过级联属性赋值解决多对一的映射关系" class="toc-sidebar-link">通过级联属性赋值解决多对一的映射关系</a></li></ul></li><li><a href="/mybatis/#第二种-处理多对一的映射关系" class="toc-sidebar-link">第二种:处理多对一的映射关系</a><ul class="toc-sidebar-sub-headers"><li class="toc-sidebar-sub-header"><a href="/mybatis/#通过association解决多对一的映射关系-常用" class="toc-sidebar-link">通过association解决多对一的映射关系(常用)</a></li></ul></li><li><a href="/mybatis/#第三种-处理多对一的映射关系" class="toc-sidebar-link">第三种:处理多对一的映射关系</a><ul class="toc-sidebar-sub-headers"><li class="toc-sidebar-sub-header"><a href="/mybatis/#分步查询" class="toc-sidebar-link">分步查询</a></li></ul></li><li><a href="/mybatis/#延迟加载" class="toc-sidebar-link">延迟加载</a><ul class="toc-sidebar-sub-headers"><li class="toc-sidebar-sub-header"><a href="/mybatis/#开启延迟加载" class="toc-sidebar-link">开启延迟加载</a></li></ul></li><li><a href="/mybatis/#通过collection解决一对多的映射关系" class="toc-sidebar-link">通过collection解决一对多的映射关系</a><ul class="toc-sidebar-sub-headers"><li class="toc-sidebar-sub-header"><a href="/mybatis/#获取部门以及部门中所有的员工信息" class="toc-sidebar-link">获取部门以及部门中所有的员工信息</a></li></ul></li><li><a href="/mybatis/#通过分步查询解决一对多的映射关系" class="toc-sidebar-link">通过分步查询解决一对多的映射关系</a><ul class="toc-sidebar-sub-headers"><li class="toc-sidebar-sub-header"><a href="/mybatis/#通过分步查询查询部门以及部门中所有的员工信息" class="toc-sidebar-link">通过分步查询查询部门以及部门中所有的员工信息</a></li></ul></li><li><a href="/mybatis/#回顾" class="toc-sidebar-link">回顾</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/mybatis/#初始动态sql" class="toc-sidebar-link">初始动态SQL</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/mybatis/#if标签-常用" class="toc-sidebar-link">if标签(常用)</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/mybatis/#where标签-常用" class="toc-sidebar-link">where标签(常用)</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/mybatis/#choose、when、otherwise" class="toc-sidebar-link">choose、when、otherwise</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/mybatis/#foreach-常用" class="toc-sidebar-link">foreach(常用)</a><ul class="toc-sidebar-sub-headers"><li class="toc-sidebar-sub-header"><a href="/mybatis/#批量删除" class="toc-sidebar-link">批量删除</a></li><li class="toc-sidebar-sub-header"><a href="/mybatis/#批量添加" class="toc-sidebar-link">批量添加</a></li></ul></li><li><a href="/mybatis/#sql标签-sql片段" class="toc-sidebar-link">SQL标签(SQL片段)</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/mybatis/#mybtais一级缓存" class="toc-sidebar-link">Mybtais一级缓存</a><ul class="toc-sidebar-sub-headers"><li class="toc-sidebar-sub-header"><a href="/mybatis/#不同的sqlsession对应不同的一级缓存" class="toc-sidebar-link">不同的SqlSession对应不同的一级缓存</a></li><li class="toc-sidebar-sub-header"><a href="/mybatis/#同一个sqlsession但是查询条件不同" class="toc-sidebar-link">同一个SqlSession但是查询条件不同</a></li><li class="toc-sidebar-sub-header"><a href="/mybatis/#同一个sqlsession两次查询期间执行了任何一次增删改操作" class="toc-sidebar-link">同一个SqlSession两次查询期间执行了任何一次增删改操作</a></li><li class="toc-sidebar-sub-header"><a href="/mybatis/#同一个sqlsession两次查询期间手动清空了-一级-缓存" class="toc-sidebar-link">同一个SqlSession两次查询期间手动清空了（一级）缓存</a></li></ul></li><li><a href="/mybatis/#mybatis二级缓存" class="toc-sidebar-link">Mybatis二级缓存</a><ul class="toc-sidebar-sub-headers"><li class="toc-sidebar-sub-header"><a href="/mybatis/#二级缓存的开启条件" class="toc-sidebar-link">二级缓存的开启条件</a></li><li class="toc-sidebar-sub-header"><a href="/mybatis/#在映射文件中设置标签-cache" class="toc-sidebar-link">在映射文件中设置标签&lt;cache /&gt;</a></li><li class="toc-sidebar-sub-header"><a href="/mybatis/#测试" class="toc-sidebar-link">测试</a></li></ul></li><li><a href="/mybatis/#mybatis缓存查询的顺序" class="toc-sidebar-link">Mybatis缓存查询的顺序</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/mybatis/#mybatis整合第三方缓存ehchahe" class="toc-sidebar-link">Mybatis整合第三方缓存EHChahe</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/mybatis/#创建逆向工程的步骤" class="toc-sidebar-link">创建逆向工程的步骤</a><ul class="toc-sidebar-sub-headers"><li class="toc-sidebar-sub-header"><a href="/mybatis/#添加依赖和插件" class="toc-sidebar-link">添加依赖和插件</a></li><li class="toc-sidebar-sub-header"><a href="/mybatis/#创建mybatis的核心配置文件-2" class="toc-sidebar-link">创建MyBatis的核心配置文件</a></li><li class="toc-sidebar-sub-header"><a href="/mybatis/#创建逆向工程的配置文件" class="toc-sidebar-link">创建逆向工程的配置文件</a></li></ul></li><li><a href="/mybatis/#qbc" class="toc-sidebar-link">QBC</a><ul class="toc-sidebar-sub-headers"><li class="toc-sidebar-sub-header"><a href="/mybatis/#查询" class="toc-sidebar-link">查询</a></li><li class="toc-sidebar-sub-header"><a href="/mybatis/#增改" class="toc-sidebar-link">增改</a></li></ul></li><li><a href="/mybatis/#分页插件使用步骤" class="toc-sidebar-link">分页插件使用步骤</a><ul class="toc-sidebar-sub-headers"><li class="toc-sidebar-sub-header"><a href="/mybatis/#添加依赖" class="toc-sidebar-link">添加依赖</a></li><li class="toc-sidebar-sub-header"><a href="/mybatis/#配置分页插件" class="toc-sidebar-link">配置分页插件</a></li></ul></li><li><a href="/mybatis/#分页插件的使用" class="toc-sidebar-link">分页插件的使用</a><ul class="toc-sidebar-sub-headers"><li class="toc-sidebar-sub-header"><a href="/mybatis/#开启分页功能" class="toc-sidebar-link">开启分页功能</a></li><li class="toc-sidebar-sub-header"><a href="/mybatis/#分页相关数据" class="toc-sidebar-link">分页相关数据</a></li><li class="toc-sidebar-sub-header toc-sidebar-depth-4"><a href="/mybatis/#方法一-直接输出" class="toc-sidebar-link">方法一：直接输出</a></li><li class="toc-sidebar-sub-header toc-sidebar-depth-4"><a href="/mybatis/#方法二使用pageinfo" class="toc-sidebar-link">方法二使用PageInfo</a></li></ul></li></ul></div></div></div></div></div>  <main class="footer"> <div class="copy-right"><span class="name"> 失败才是人生的主旋律   |     </span> <a target="_blank" rel="noreferrer">
          
        </a></div></main></main> <aside class="page-sidebar"> <div class="page-side-toolbar"></div>  </aside></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.bfb9a41f.js" defer></script><script src="/assets/js/2.11372cd1.js" defer></script><script src="/assets/js/63.d1b52891.js" defer></script>
  </body>
</html>
